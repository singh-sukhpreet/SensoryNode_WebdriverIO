(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"1SL8":function(n,l,e){"use strict";e.r(l);var t=e("CcnG"),o=e("mrSG"),u=e("ZZ/e"),i=e("mcMp"),r=e("Gs5E"),s=e("mMyO"),c=function(){function n(n,l,e,t,o,u,i,r){this.storage=n,this.sensorNodeApi=l,this.loadingCtrl=e,this.alertCtrl=t,this.router=o,this.route=u,this.ga=i,this.redirectService=r,this.username="",this.isActualOwner=!0,this.fromMain="false"}return n.prototype.ngOnInit=function(){var n=this;this.ga.sendPageView("device-info","device-info"),this.deviceId=this.route.snapshot.paramMap.get("deviceId"),this.fromMain=this.route.snapshot.queryParamMap.get("fromMain"),console.log(this.fromMain),this.deviceSettings={uploadRate:0,shadowReadRate:0},this.monkeyDevice={},this.storage.get("myDevices").then(function(l){n.monkeyDevice=l.find(function(l){return l.deviceId===n.deviceId}),console.log("MonkeyDevice = ",n.monkeyDevice),"child"===n.monkeyDevice.share[0]&&(n.isActualOwner=!1),"W"===n.monkeyDevice.commsType?(n.isWifiDevice=!0,console.log("Detected WiFi device.")):n.isWifiDevice=!1,console.log("monkey device = ",n.monkeyDevice);try{n.deviceSettings=n.monkeyDevice.deviceSettings,n.uploadRateString=n.deviceSettings.uploadRate.toString(),console.log("this.uploadRate = ",n.uploadRateString)}catch(e){console.log('invalid deviceSettings information = "'+n.monkeyDevice.deviceSettings+'"')}}),this.storage.get("username").then(function(l){n.username=l})},n.prototype.updateProjectInfo=function(){return o.a(this,void 0,void 0,function(){var n,l=this;return o.c(this,function(e){switch(e.label){case 0:return[4,this.alertCtrl.create({header:"Confirm Changes",message:"Update Device Settings",buttons:[{text:"OK",handler:function(){return o.a(l,void 0,void 0,function(){var l,e,t,u,i,r=this;return o.c(this,function(o){switch(o.label){case 0:l=n.dismiss(),this.deviceSettings.uploadRate=parseInt(this.uploadRateString),o.label=1;case 1:return o.trys.push([1,5,,6]),console.log(this.monkeyDevice),this.monkeyDevice.notes=this.monkeyDevice.notes.replace(/[\|\'\"\(\)\+,]/g,""),this.monkeyDevice.name=this.monkeyDevice.name.replace(/[\|\'\"\(\)\+,]/g,""),[4,this.sensorNodeApi.putDevice(this.monkeyDevice)];case 2:return e=o.sent(),console.log("Success :",e),[4,this.storage.get("myDevices")];case 3:return t=o.sent(),console.log("MonkeyDevices before = ",t),u=t.findIndex(function(n){return n.deviceId===r.deviceId}),t[u]=this.monkeyDevice,console.log("myDevices to set  = ",t),[4,this.storage.set("myDevices",t)];case 4:return o.sent(),[3,6];case 5:return i=o.sent(),console.log("Failed : ",i),[3,6];case 6:return l.then(function(){r.goBack()}),[2]}})})}},{text:"Cancel",role:"cancel",handler:function(){console.log("Cancel clicked")}}]})];case 1:return[4,(n=e.sent()).present()];case 2:return e.sent(),[2]}})})},n.prototype.revokeDevice=function(){return o.a(this,void 0,void 0,function(){var n,l=this;return o.c(this,function(e){switch(e.label){case 0:return[4,this.alertCtrl.create({header:"Delete Device",message:"Are you sure? This will remove access for shared users too. ",buttons:[{text:"Cancel",role:"cancel",handler:function(){console.log("Cancel clicked")}},{text:"Delete",handler:function(){var e=n.dismiss();return console.log("Going to Delete Device :",l.monkeyDevice),l.monkeyDevice.deviceOwner="unclaimed",l.sensorNodeApi.putDevice(l.monkeyDevice).then(function(n){console.log("Success :",n),e.then(function(){l.redirectService.redirect("/my-devices","","?reload=Yes")})}).catch(function(n){console.log("Failed : ",n)}),!1}}]})];case 1:return[4,(n=e.sent()).present()];case 2:return e.sent(),[2]}})})},n.prototype.deleteAllData=function(){return o.a(this,void 0,void 0,function(){var n,l=this;return o.c(this,function(e){switch(e.label){case 0:return[4,this.alertCtrl.create({header:"Erase All Data!",message:"Are you sure? This will erase all data permenantly.",buttons:[{text:"Cancel",role:"cancel",handler:function(){console.log("Cancel clicked")}},{text:"Delete",handler:function(){return o.a(l,void 0,void 0,function(){var l,e,t=this;return o.c(this,function(o){switch(o.label){case 0:return l=n.dismiss(),console.log("Deleting All Stored Data for device - ",this.monkeyDevice),[4,this.loadingCtrl.create({message:"OK! Deleting all data for "+this.monkeyDevice.name})];case 1:return[4,(e=o.sent()).present()];case 2:return o.sent(),this.sensorNodeApi.deleteData(this.monkeyDevice.deviceId).then(function(n){console.log("Success :",n),l.then(function(){e.dismiss(),t.redirectService.redirect("/my-devices","","?reload=No")})}).catch(function(n){console.log("Failed : ",n),e.dismiss()}),[2,!1]}})})}}]})];case 1:return[4,(n=e.sent()).present()];case 2:return e.sent(),[2]}})})},n.prototype.goBack=function(){"true"===this.fromMain?this.redirectService.redirect("/my-devices"):this.redirectService.redirect("/device/data/",this.deviceId,"?customRange=check")},n}(),a=function(){return function(){}}(),b=e("pMnS"),d=e("oBZk"),g=e("gIcY"),h=e("Ip0R"),p=e("iw74"),f=e("ZYCi"),v=t.nb({encapsulation:0,styles:[["ion-select[_ngcontent-%COMP%]{color:#00c3e8;--placeholder-color:light;--placeholder-opacity:1}"]],data:{}});function m(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,8,"ion-item",[["lines","none"]],null,null,null,d.lb,d.u)),t.ob(1,49152,null,0,u.I,[t.h,t.k],{lines:[0,"lines"]},null),(n()(),t.pb(2,0,null,0,5,"ion-label",[],null,null,null,d.mb,d.v)),t.ob(3,49152,null,0,u.O,[t.h,t.k],null,null),(n()(),t.pb(4,0,null,0,3,"ion-text",[],null,null,null,d.Cb,d.L)),t.ob(5,49152,null,0,u.xb,[t.h,t.k],null,null),(n()(),t.pb(6,0,null,0,1,"h5",[["style","font-size: 1.2rem;"],["text-center",""]],null,null,null,null,null)),(n()(),t.Gb(-1,null,[" This is a shared Device "])),(n()(),t.pb(8,0,null,0,0,"p",[["style","padding-top: 20px;"]],null,null,null,null,null))],function(n,l){n(l,1,0,"none")},null)}function k(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,23,"ion-item",[],null,null,null,d.lb,d.u)),t.ob(1,49152,null,0,u.I,[t.h,t.k],null,null),(n()(),t.pb(2,0,null,0,2,"ion-label",[["class","deviceview-heading-text"],["position","floating"]],null,null,null,d.mb,d.v)),t.ob(3,49152,null,0,u.O,[t.h,t.k],{position:[0,"position"]},null),(n()(),t.Gb(-1,0,["Data Upload Interval : "])),(n()(),t.pb(5,0,null,0,18,"ion-select",[["color","primary"],["interface","action-sheet"],["mode","ios"],["name","uploadRate"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(n,l,e){var o=!0,u=n.component;return"ionBlur"===l&&(o=!1!==t.zb(n,6)._handleBlurEvent()&&o),"ionChange"===l&&(o=!1!==t.zb(n,6)._handleChangeEvent(e.target.value)&&o),"ngModelChange"===l&&(o=!1!==(u.uploadRateString=e)&&o),o},d.xb,d.F)),t.ob(6,16384,null,0,u.Ob,[t.k],null,null),t.Db(1024,null,g.f,function(n){return[n]},[u.Ob]),t.ob(8,671744,[["uploadRate",4]],0,g.k,[[2,g.a],[8,null],[8,null],[6,g.f]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t.Db(2048,null,g.g,null,[g.k]),t.ob(10,16384,null,0,g.h,[[4,g.g]],null,null),t.ob(11,49152,null,0,u.nb,[t.h,t.k],{mode:[0,"mode"],name:[1,"name"],interface:[2,"interface"]},null),(n()(),t.pb(12,0,null,0,2,"ion-select-option",[["color","primary"],["value","15"]],null,null,null,d.wb,d.G)),t.ob(13,49152,null,0,u.ob,[t.h,t.k],{value:[0,"value"]},null),(n()(),t.Gb(-1,0,["15 minutes "])),(n()(),t.pb(15,0,null,0,2,"ion-select-option",[["color","primary"],["value","60"]],null,null,null,d.wb,d.G)),t.ob(16,49152,null,0,u.ob,[t.h,t.k],{value:[0,"value"]},null),(n()(),t.Gb(-1,0,["1 hour "])),(n()(),t.pb(18,0,null,0,2,"ion-select-option",[["color","primary"],["value","360"]],null,null,null,d.wb,d.G)),t.ob(19,49152,null,0,u.ob,[t.h,t.k],{value:[0,"value"]},null),(n()(),t.Gb(-1,0,["6 hours "])),(n()(),t.pb(21,0,null,0,2,"ion-select-option",[["color","primary"],["value","1440"]],null,null,null,d.wb,d.G)),t.ob(22,49152,null,0,u.ob,[t.h,t.k],{value:[0,"value"]},null),(n()(),t.Gb(-1,0,["Daily "]))],function(n,l){var e=l.component;n(l,3,0,"floating"),n(l,8,0,"uploadRate",e.uploadRateString),n(l,11,0,"ios","uploadRate","action-sheet"),n(l,13,0,"15"),n(l,16,0,"60"),n(l,19,0,"360"),n(l,22,0,"1440")},function(n,l){n(l,5,0,t.zb(l,10).ngClassUntouched,t.zb(l,10).ngClassTouched,t.zb(l,10).ngClassPristine,t.zb(l,10).ngClassDirty,t.zb(l,10).ngClassValid,t.zb(l,10).ngClassInvalid,t.zb(l,10).ngClassPending)})}function y(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,17,"ion-item",[["padding-left",""]],null,null,null,d.lb,d.u)),t.ob(1,49152,null,0,u.I,[t.h,t.k],null,null),(n()(),t.pb(2,0,null,0,2,"ion-label",[["class","deviceview-heading-text"],["position","stacked"]],null,null,null,d.mb,d.v)),t.ob(3,49152,null,0,u.O,[t.h,t.k],{position:[0,"position"]},null),(n()(),t.Gb(-1,0,["Contribute Anonymous Data : "])),(n()(),t.pb(5,0,null,0,12,"ion-select",[["color","primary"],["interface","action-sheet"],["mode","ios"],["name","canUse"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(n,l,e){var o=!0,u=n.component;return"ionBlur"===l&&(o=!1!==t.zb(n,6)._handleBlurEvent()&&o),"ionChange"===l&&(o=!1!==t.zb(n,6)._handleChangeEvent(e.target.value)&&o),"ngModelChange"===l&&(o=!1!==(u.monkeyDevice.canUseData=e)&&o),o},d.xb,d.F)),t.ob(6,16384,null,0,u.Ob,[t.k],null,null),t.Db(1024,null,g.f,function(n){return[n]},[u.Ob]),t.ob(8,671744,[["canUse",4]],0,g.k,[[2,g.a],[8,null],[8,null],[6,g.f]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t.Db(2048,null,g.g,null,[g.k]),t.ob(10,16384,null,0,g.h,[[4,g.g]],null,null),t.ob(11,49152,null,0,u.nb,[t.h,t.k],{mode:[0,"mode"],name:[1,"name"],interface:[2,"interface"]},null),(n()(),t.pb(12,0,null,0,2,"ion-select-option",[["color","primary"],["value","No"]],null,null,null,d.wb,d.G)),t.ob(13,49152,null,0,u.ob,[t.h,t.k],{value:[0,"value"]},null),(n()(),t.Gb(-1,0,["No "])),(n()(),t.pb(15,0,null,0,2,"ion-select-option",[["color","primary"],["value","Yes"]],null,null,null,d.wb,d.G)),t.ob(16,49152,null,0,u.ob,[t.h,t.k],{value:[0,"value"]},null),(n()(),t.Gb(-1,0,["Yes"]))],function(n,l){var e=l.component;n(l,3,0,"stacked"),n(l,8,0,"canUse",e.monkeyDevice.canUseData),n(l,11,0,"ios","canUse","action-sheet"),n(l,13,0,"No"),n(l,16,0,"Yes")},function(n,l){n(l,5,0,t.zb(l,10).ngClassUntouched,t.zb(l,10).ngClassTouched,t.zb(l,10).ngClassPristine,t.zb(l,10).ngClassDirty,t.zb(l,10).ngClassValid,t.zb(l,10).ngClassInvalid,t.zb(l,10).ngClassPending)})}function D(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,4,"ion-button",[["expand","block"],["icon-end",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.deleteAllData()&&t),t},d.U,d.d)),t.ob(1,49152,null,0,u.l,[t.h,t.k],{expand:[0,"expand"]},null),(n()(),t.Gb(-1,0,[" Erase "])),(n()(),t.pb(3,0,null,0,1,"ion-icon",[["color","#ffffff"],["name","trash"],["slot","end"]],null,null,null,d.jb,d.s)),t.ob(4,49152,null,0,u.D,[t.h,t.k],{color:[0,"color"],name:[1,"name"]},null)],function(n,l){n(l,1,0,"block"),n(l,4,0,"#ffffff","trash")},null)}function C(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,9,"ion-item",[],null,null,null,d.lb,d.u)),t.ob(1,49152,null,0,u.I,[t.h,t.k],null,null),(n()(),t.pb(2,0,null,0,1,"h4",[["class","deviceview-heading-text"]],null,null,null,null,null)),(n()(),t.Gb(-1,null,["Status : "])),(n()(),t.pb(4,0,null,0,1,"h2",[["color","primary"]],null,null,null,null,null)),(n()(),t.Gb(-1,null,["Connect to WiFi"])),(n()(),t.pb(6,0,null,0,3,"ion-button",[["fill","clear"],["icon-only",""],["size","small"],["slot","end"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.onClickWifiSetup()&&t),t},d.U,d.d)),t.ob(7,49152,null,0,u.l,[t.h,t.k],{fill:[0,"fill"],size:[1,"size"]},null),(n()(),t.pb(8,0,null,0,1,"ion-icon",[["color","primary"],["name","wifi"],["slot","end"]],null,null,null,d.jb,d.s)),t.ob(9,49152,null,0,u.D,[t.h,t.k],{color:[0,"color"],name:[1,"name"]},null)],function(n,l){n(l,7,0,"clear","small"),n(l,9,0,"primary","wifi")},null)}function I(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,2,"div",[],null,null,null,null,null)),(n()(),t.gb(16777216,null,null,1,null,C)),t.ob(2,16384,null,0,h.l,[t.O,t.L],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,2,0,"E"==(null==e.monkeyDevice?null:e.monkeyDevice.commsType))},null)}function w(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,11,"ion-header",[],null,null,null,d.ib,d.r)),t.ob(1,49152,null,0,u.C,[t.h,t.k],null,null),(n()(),t.pb(2,0,null,0,9,"ion-toolbar",[],null,null,null,d.Gb,d.P)),t.ob(3,49152,null,0,u.Cb,[t.h,t.k],null,null),(n()(),t.pb(4,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,d.V,d.e)),t.ob(5,49152,null,0,u.m,[t.h,t.k],null,null),(n()(),t.pb(6,0,null,0,2,"ion-back-button",[],null,[[null,"click"]],function(n,l,e){var o=!0;return"click"===l&&(o=!1!==t.zb(n,8).onClick(e)&&o),o},d.S,d.b)),t.ob(7,49152,null,0,u.h,[t.h,t.k],null,null),t.ob(8,16384,null,0,u.i,[[2,u.ib],u.Jb],null,null),(n()(),t.pb(9,0,null,0,2,"ion-title",[],null,null,null,d.Eb,d.N)),t.ob(10,49152,null,0,u.Ab,[t.h,t.k],null,null),(n()(),t.Gb(-1,0,[" Device Settings "])),(n()(),t.pb(12,0,null,null,89,"ion-content",[],null,null,null,d.eb,d.n)),t.ob(13,49152,null,0,u.v,[t.h,t.k],null,null),(n()(),t.pb(14,0,null,0,0,"p",[["style","padding-top: 20px;"]],null,null,null,null,null)),(n()(),t.pb(15,0,null,0,8,"ion-row",[],null,null,null,d.sb,d.B)),t.ob(16,49152,null,0,u.jb,[t.h,t.k],null,null),(n()(),t.pb(17,0,null,0,1,"ion-col",[],null,null,null,d.db,d.m)),t.ob(18,49152,null,0,u.u,[t.h,t.k],null,null),(n()(),t.pb(19,0,null,0,2,"ion-col",[["size","4"],["size-lg","2"],["size-md","3"],["size-xl","2"]],null,null,null,d.db,d.m)),t.ob(20,49152,null,0,u.u,[t.h,t.k],{size:[0,"size"]},null),(n()(),t.pb(21,0,null,0,0,"img",[["alt","settings"],["src","assets/images/settingsMultiBlue.svg"],["style","width: 100%;"]],null,null,null,null,null)),(n()(),t.pb(22,0,null,0,1,"ion-col",[],null,null,null,d.db,d.m)),t.ob(23,49152,null,0,u.u,[t.h,t.k],null,null),(n()(),t.pb(24,0,null,0,0,"p",[["style","padding-top: 10px;"]],null,null,null,null,null)),(n()(),t.gb(16777216,null,0,1,null,m)),t.ob(26,16384,null,0,h.l,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(n()(),t.pb(27,0,null,0,74,"form",[["novalidate",""],["style","width:100%;"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(n,l,e){var o=!0,u=n.component;return"submit"===l&&(o=!1!==t.zb(n,29).onSubmit(e)&&o),"reset"===l&&(o=!1!==t.zb(n,29).onReset()&&o),"ngSubmit"===l&&(o=!1!==u.updateProjectInfo()&&o),o},null,null)),t.ob(28,16384,null,0,g.n,[],null,null),t.ob(29,4210688,[["addProjectInfoForm",4]],0,g.j,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),t.Db(2048,null,g.a,null,[g.j]),t.ob(31,16384,null,0,g.i,[[4,g.a]],null,null),(n()(),t.pb(32,0,null,null,69,"ion-list",[["style","height: auto"],["text-wrap",""]],null,null,null,d.nb,d.w)),t.ob(33,49152,null,0,u.P,[t.h,t.k],null,null),(n()(),t.pb(34,0,null,0,67,"ion-row",[["justify-content-center",""]],null,null,null,d.sb,d.B)),t.ob(35,49152,null,0,u.jb,[t.h,t.k],null,null),(n()(),t.pb(36,0,null,0,65,"ion-col",[["size","12"],["size-md","6"],["size-xl","4"]],null,null,null,d.db,d.m)),t.ob(37,49152,null,0,u.u,[t.h,t.k],{size:[0,"size"]},null),(n()(),t.pb(38,0,null,0,8,"ion-item",[],null,null,null,d.lb,d.u)),t.ob(39,49152,null,0,u.I,[t.h,t.k],null,null),(n()(),t.pb(40,0,null,0,2,"ion-label",[["class","deviceview-heading-text"],["position","stacked"]],null,null,null,d.mb,d.v)),t.ob(41,49152,null,0,u.O,[t.h,t.k],{position:[0,"position"]},null),(n()(),t.Gb(-1,0,["Device Unique Id : "])),(n()(),t.pb(43,0,null,0,3,"ion-input",[["color","primary"],["readonly","true"]],null,[[null,"ionBlur"],[null,"ionChange"]],function(n,l,e){var o=!0;return"ionBlur"===l&&(o=!1!==t.zb(n,46)._handleBlurEvent()&&o),"ionChange"===l&&(o=!1!==t.zb(n,46)._handleInputEvent(e.target.value)&&o),o},d.kb,d.t)),t.Db(5120,null,g.f,function(n){return[n]},[u.Pb]),t.ob(45,49152,null,0,u.H,[t.h,t.k],{color:[0,"color"],readonly:[1,"readonly"],value:[2,"value"]},null),t.ob(46,16384,null,0,u.Pb,[t.k],null,null),(n()(),t.pb(47,0,null,0,11,"ion-item",[["padding-left",""]],null,null,null,d.lb,d.u)),t.ob(48,49152,null,0,u.I,[t.h,t.k],null,null),(n()(),t.pb(49,0,null,0,2,"ion-label",[["class","deviceview-heading-text"],["position","stacked"]],null,null,null,d.mb,d.v)),t.ob(50,49152,null,0,u.O,[t.h,t.k],{position:[0,"position"]},null),(n()(),t.Gb(-1,0,["Name : "])),(n()(),t.pb(52,0,null,0,6,"ion-input",[["color","primary"],["name","name"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(n,l,e){var o=!0,u=n.component;return"ionBlur"===l&&(o=!1!==t.zb(n,53)._handleBlurEvent()&&o),"ionChange"===l&&(o=!1!==t.zb(n,53)._handleInputEvent(e.target.value)&&o),"ngModelChange"===l&&(o=!1!==(u.monkeyDevice.name=e)&&o),o},d.kb,d.t)),t.ob(53,16384,null,0,u.Pb,[t.k],null,null),t.Db(1024,null,g.f,function(n){return[n]},[u.Pb]),t.ob(55,671744,[["name",4]],0,g.k,[[2,g.a],[8,null],[8,null],[6,g.f]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t.Db(2048,null,g.g,null,[g.k]),t.ob(57,16384,null,0,g.h,[[4,g.g]],null,null),t.ob(58,49152,null,0,u.H,[t.h,t.k],{color:[0,"color"],name:[1,"name"]},null),(n()(),t.pb(59,0,null,0,11,"ion-item",[["padding-left",""]],null,null,null,d.lb,d.u)),t.ob(60,49152,null,0,u.I,[t.h,t.k],null,null),(n()(),t.pb(61,0,null,0,2,"ion-label",[["class","deviceview-heading-text"],["position","stacked"]],null,null,null,d.mb,d.v)),t.ob(62,49152,null,0,u.O,[t.h,t.k],{position:[0,"position"]},null),(n()(),t.Gb(-1,0,["Notes : "])),(n()(),t.pb(64,0,null,0,6,"ion-input",[["color","primary"],["name","notes"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(n,l,e){var o=!0,u=n.component;return"ionBlur"===l&&(o=!1!==t.zb(n,65)._handleBlurEvent()&&o),"ionChange"===l&&(o=!1!==t.zb(n,65)._handleInputEvent(e.target.value)&&o),"ngModelChange"===l&&(o=!1!==(u.monkeyDevice.notes=e)&&o),o},d.kb,d.t)),t.ob(65,16384,null,0,u.Pb,[t.k],null,null),t.Db(1024,null,g.f,function(n){return[n]},[u.Pb]),t.ob(67,671744,[["notes",4]],0,g.k,[[2,g.a],[8,null],[8,null],[6,g.f]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t.Db(2048,null,g.g,null,[g.k]),t.ob(69,16384,null,0,g.h,[[4,g.g]],null,null),t.ob(70,49152,null,0,u.H,[t.h,t.k],{color:[0,"color"],name:[1,"name"]},null),(n()(),t.gb(16777216,null,0,1,null,k)),t.ob(72,16384,null,0,h.l,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(n()(),t.gb(16777216,null,0,1,null,y)),t.ob(74,16384,null,0,h.l,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(n()(),t.pb(75,0,null,0,11,"ion-row",[],null,null,null,d.sb,d.B)),t.ob(76,49152,null,0,u.jb,[t.h,t.k],null,null),(n()(),t.pb(77,0,null,0,9,"ion-col",[],null,null,null,d.db,d.m)),t.ob(78,49152,null,0,u.u,[t.h,t.k],null,null),(n()(),t.pb(79,0,null,0,4,"ion-button",[["class","add-device-button"],["expand","block"],["margin-top","50px"],["type","submit"]],null,null,null,d.U,d.d)),t.ob(80,49152,null,0,u.l,[t.h,t.k],{disabled:[0,"disabled"],expand:[1,"expand"],type:[2,"type"]},null),(n()(),t.pb(81,0,null,0,1,"ion-icon",[["name","checkmark-circle-outline"],["slot","start"]],null,null,null,d.jb,d.s)),t.ob(82,49152,null,0,u.D,[t.h,t.k],{name:[0,"name"]},null),(n()(),t.Gb(-1,0,["Update "])),(n()(),t.pb(84,0,null,0,2,"ion-button",[["expand","block"],["fill","outline"],["margin-top","50px"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.goBack()&&t),t},d.U,d.d)),t.ob(85,49152,null,0,u.l,[t.h,t.k],{expand:[0,"expand"],fill:[1,"fill"]},null),(n()(),t.Gb(-1,0,[" Cancel "])),(n()(),t.pb(87,0,null,0,12,"ion-row",[],null,null,null,d.sb,d.B)),t.ob(88,49152,null,0,u.jb,[t.h,t.k],null,null),(n()(),t.pb(89,0,null,0,3,"ion-col",[],null,null,null,d.db,d.m)),t.ob(90,49152,null,0,u.u,[t.h,t.k],null,null),(n()(),t.gb(16777216,null,0,1,null,D)),t.ob(92,16384,null,0,h.l,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(n()(),t.pb(93,0,null,0,6,"ion-col",[],null,null,null,d.db,d.m)),t.ob(94,49152,null,0,u.u,[t.h,t.k],null,null),(n()(),t.pb(95,0,null,0,4,"ion-button",[["expand","block"],["icon-end",""]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.revokeDevice()&&t),t},d.U,d.d)),t.ob(96,49152,null,0,u.l,[t.h,t.k],{expand:[0,"expand"]},null),(n()(),t.Gb(-1,0,[" Delete "])),(n()(),t.pb(98,0,null,0,1,"ion-icon",[["color","#ffffff"],["name","trash"],["slot","end"]],null,null,null,d.jb,d.s)),t.ob(99,49152,null,0,u.D,[t.h,t.k],{color:[0,"color"],name:[1,"name"]},null),(n()(),t.gb(16777216,null,0,1,null,I)),t.ob(101,16384,null,0,h.l,[t.O,t.L],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,20,0,"4"),n(l,26,0,!e.isActualOwner),n(l,37,0,"12"),n(l,41,0,"stacked"),n(l,45,0,"primary","true",null==e.monkeyDevice?null:e.monkeyDevice.deviceId),n(l,50,0,"stacked"),n(l,55,0,"name",e.monkeyDevice.name),n(l,58,0,"primary","name"),n(l,62,0,"stacked"),n(l,67,0,"notes",e.monkeyDevice.notes),n(l,70,0,"primary","notes"),n(l,72,0,e.isActualOwner&&e.isWifiDevice),n(l,74,0,e.isActualOwner),n(l,80,0,!t.zb(l,29).form.valid,"block","submit"),n(l,82,0,"checkmark-circle-outline"),n(l,85,0,"block","outline"),n(l,92,0,e.isActualOwner),n(l,96,0,"block"),n(l,99,0,"#ffffff","trash"),n(l,101,0,e.isActualOwner)},function(n,l){n(l,27,0,t.zb(l,31).ngClassUntouched,t.zb(l,31).ngClassTouched,t.zb(l,31).ngClassPristine,t.zb(l,31).ngClassDirty,t.zb(l,31).ngClassValid,t.zb(l,31).ngClassInvalid,t.zb(l,31).ngClassPending),n(l,52,0,t.zb(l,57).ngClassUntouched,t.zb(l,57).ngClassTouched,t.zb(l,57).ngClassPristine,t.zb(l,57).ngClassDirty,t.zb(l,57).ngClassValid,t.zb(l,57).ngClassInvalid,t.zb(l,57).ngClassPending),n(l,64,0,t.zb(l,69).ngClassUntouched,t.zb(l,69).ngClassTouched,t.zb(l,69).ngClassPristine,t.zb(l,69).ngClassDirty,t.zb(l,69).ngClassValid,t.zb(l,69).ngClassInvalid,t.zb(l,69).ngClassPending)})}function z(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,1,"app-settings",[],null,null,null,w,v)),t.ob(1,114688,null,0,c,[p.b,i.a,u.Gb,u.b,f.m,f.a,s.a,r.a],null,null)],function(n,l){n(l,1,0)},null)}var S=t.lb("app-settings",c,z,{},{},[]);e.d(l,"SettingsPageModuleNgFactory",function(){return x});var x=t.mb(a,[],function(n){return t.wb([t.xb(512,t.j,t.bb,[[8,[b.a,S]],[3,t.j],t.x]),t.xb(4608,h.n,h.m,[t.u,[2,h.x]]),t.xb(4608,g.o,g.o,[]),t.xb(4608,u.c,u.c,[t.z,t.g]),t.xb(4608,u.Ib,u.Ib,[u.c,t.j,t.q,h.d]),t.xb(4608,u.Mb,u.Mb,[u.c,t.j,t.q,h.d]),t.xb(1073742336,h.c,h.c,[]),t.xb(1073742336,g.m,g.m,[]),t.xb(1073742336,g.b,g.b,[]),t.xb(1073742336,u.Eb,u.Eb,[]),t.xb(1073742336,f.o,f.o,[[2,f.v],[2,f.m]]),t.xb(1073742336,a,a,[]),t.xb(1024,f.k,function(){return[[{path:"",component:c}]]},[])])})},mcMp:function(n,l,e){"use strict";e.d(l,"a",function(){return c});var t=e("mrSG"),o=e("ccyI"),u=e("sE5F"),i=e("67Y/"),r=e("CcnG"),s="https://g9spnwib9k.execute-api.ap-southeast-2.amazonaws.com/v1/",c=function(){function n(n,l){this.http=n,this.authService=l}return n.prototype.removeIllegalChars=function(n){var l=JSON.stringify(n);return console.log("tempStr = "+l),l=l.replace(/[']/g,""),JSON.parse(l)},n.prototype.putReport=function(n,l,e,t){var o=this;return new Promise(function(r,c){o.authService.getAuthenticatedUser().getSession(function(a,b){if(a)return console.log("Error refreshing user session in get Put Report method.",a),c(a);o.http.put(s+"report/?fromTime="+l+"&toTime="+e+"&proxyEmail="+t,n,{headers:new u.d({Authorization:b.getIdToken().getJwtToken()})}).pipe(Object(i.a)(function(n){return n.json()})).subscribe(function(n){return console.log("data : ",n),r(n)},function(n){return console.log("Error in subscribe block. ",n),c(n)})})})},n.prototype.putReportAnalytics=function(n,l,e,t,o,r){var c=this;return new Promise(function(a,b){c.authService.getAuthenticatedUser().getSession(function(d,g){if(d)return console.log("Error refreshing user session in get Put Report method.",d),b(d);c.http.put(s+"report-analytics/?fromTime="+l+"&toTime="+e+"&proxyEmail="+t+"&rmdFile="+o+"&reportParams="+r,n,{headers:new u.d({Authorization:g.getIdToken().getJwtToken()})}).pipe(Object(i.a)(function(n){return n.json()})).subscribe(function(n){return console.log("data : ",n),a(n)},function(n){return console.log("Error in subscribe block. ",n),b(n)})})})},n.prototype.getDeviceData=function(n,l,e){var t=this;return console.log("Let's grab some data for device : "+n),new Promise(function(o,r){t.authService.getAuthenticatedUser().getSession(function(c,a){if(c)return console.log("Error refreshing user session in get Data method.",c),r(c);t.http.get(s+"data/"+n+"?fromTime="+l+"&toTime="+e,{headers:new u.d({Authorization:a.getIdToken().getJwtToken()})}).pipe(Object(i.a)(function(n){return n.json()})).subscribe(function(l){try{if("all"===n){var e=l.body.filter(function(n){return"C"===n.id.charAt(0)||"W"===n.id.charAt(0)||"S"===n.id.charAt(0)||"F"===n.id.charAt(0)||"P"===n.id.charAt(0)||n.id.charAt(0)<="9"});l.body=e}}catch(c){console.log("GetDeviceError = ",c)}return o(l)},function(n){return console.log("Error in subscribe block. ",n),r(n)})})})},n.prototype.deleteData=function(n){console.log("deleting Device Data : ",n);var l=this;return new Promise(function(e,t){l.authService.getAuthenticatedUser().getSession(function(o,r){if(o)return console.log("Error refreshing user session in delete Data method.",o),t(o);l.http.delete(s+"data/"+n,{headers:new u.d({Authorization:r.getIdToken().getJwtToken()})}).pipe(Object(i.a)(function(n){return n.json()})).subscribe(function(n){return console.log("data : ",n),e(n)},function(n){return console.log("Error in subscribe block. ",n),t(n)})})})},n.prototype.getDeviceList=function(n){var l=this;return new Promise(function(e,t){l.authService.getAuthenticatedUser().getSession(function(o,r){if(o)return console.log("Error refreshing user session",o),t(o);console.log("inside authservice get session."),l.http.get(s+"devices/"+n,{headers:new u.d({Authorization:r.getIdToken().getJwtToken()})}).pipe(Object(i.a)(function(n){return n.json()})).subscribe(function(n){var l=n.body.filter(function(n){return"C"===n.deviceId.charAt(0)||"W"===n.deviceId.charAt(0)||"S"===n.deviceId.charAt(0)||"F"===n.deviceId.charAt(0)||"P"===n.deviceId.charAt(0)||n.deviceId.charAt(0)<="9"});return e(l)},function(n){return console.log("Error in subscribe block. ",n),t(n)})})})},n.prototype.putDevice=function(n){var l=this;return console.log("putting device: ",n),n=this.removeIllegalChars(n),console.log("clean device: ",n),new Promise(function(e,t){l.authService.getAuthenticatedUser().getSession(function(o,r){if(o)return console.log("Error refreshing user session",o),t(o);console.log("inside authservice get session."),l.http.put(s+"devices/"+n.deviceId,n,{headers:new u.d({Authorization:r.getIdToken().getJwtToken()})}).pipe(Object(i.a)(function(n){return n.json()})).subscribe(function(n){return console.log("data : ",n),e(n)},function(n){return console.log("Error in subscribe block. ",n),t(n)})})})},n.prototype.putIntervention=function(n,l){var e=this;console.log("putting intervention: ",l),l=this.removeIllegalChars(l);for(var t=0,o=Object.keys(l);t<o.length;t++){var r=o[t];""===l[r]&&(l[r]=" ");try{if(Array.isArray(l[r]))for(var c=0;c<l[r].length;c++)""===l[r][c]&&l[r].splice(c,1)}catch(a){console.log("Error removing empty array object: ",r,l[r],a)}}return console.log("after replacing empty strings: ",l),new Promise(function(t,o){e.authService.getAuthenticatedUser().getSession(function(r,c){if(r)return console.log("Error refreshing user session",r),o(r);console.log("inside authservice get session."),e.http.put(s+"intervention/"+n,l,{headers:new u.d({Authorization:c.getIdToken().getJwtToken()})}).pipe(Object(i.a)(function(n){return n.json()})).subscribe(function(n){return console.log("data : ",n),t(n)},function(n){return console.log("Error in subscribe block. ",n),o(n)})})})},n.prototype.deleteIntervention=function(n,l){console.log("deleting Intervention from - ",n);var e=this;return new Promise(function(t,o){e.authService.getAuthenticatedUser().getSession(function(r,c){if(r)return console.log("Error refreshing user session in delete intervention method.",r),o(r);e.http.delete(s+"intervention/"+n+"?ts="+l.ts,{headers:new u.d({Authorization:c.getIdToken().getJwtToken()})}).pipe(Object(i.a)(function(n){return n.json()})).subscribe(function(n){return console.log("data : ",n),t(n)},function(n){return console.log("Error in subscribe block. ",n),o(n)})})})},n.prototype.getInterventions=function(n){var l=this;return new Promise(function(e,t){l.authService.getAuthenticatedUser().getSession(function(o,r){if(o)return console.log("Error refreshing user session",o),t(o);console.log("inside authservice get session."),l.http.get(s+"intervention/"+n,{headers:new u.d({Authorization:r.getIdToken().getJwtToken()})}).pipe(Object(i.a)(function(n){return n.json()})).subscribe(function(n){return console.log("data in api service : ",n),e(n)},function(n){return console.log("Error in subscribe block. ",n),t(n)})})})},n.prototype.putUserSupport=function(n){return t.a(this,void 0,void 0,function(){var l=this;return t.c(this,function(e){switch(e.label){case 0:return[4,this.authService.getAttribute("preferred_username")];case 1:return e.sent(),[2,new Promise(function(e,t){l.authService.getAuthenticatedUser().getSession(function(o,r){if(o)return console.log("Error refreshing user session",o),t(o);var c="?searchVal="+n;console.log("inside authservice get session."),l.http.put(s+"user-support/"+c,{supportDescription:n},{headers:new u.d({Authorization:r.getIdToken().getJwtToken()})}).pipe(Object(i.a)(function(n){return n.json()})).subscribe(function(n){return console.log("data : ",n),e(n)},function(n){return console.log("Error in subscribe block. ",n),t(n)})})})]}})})},n.ngInjectableDef=r.S({factory:function(){return new n(r.W(u.e),r.W(o.a))},token:n,providedIn:"root"}),n}()}}]);