(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{MzPZ:function(n,e,l){"use strict";l.r(e);var t=l("CcnG"),o=l("mrSG"),u=l("ZZ/e"),r=l("mcMp"),i=l("Gs5E"),s=l("mMyO"),c=function(){function n(n,e,l,t,o,u,r,i,s){this.storage=n,this.sensorNodeApi=e,this.platform=l,this.loadingCtrl=t,this.alertCtrl=o,this.router=u,this.route=r,this.ga=i,this.redirectService=s,this.enableAdd=!0,this.username="",this.isActualOwner=!0,this.fromMain="false",this.helpPopUp=[{header:"Sharing Help",text:"You can share access to your devices with friends and family!"},{header:"1/3: Sharing ",text:"<b>What is shared?</b><br/><br/>                                    Your friend will be given access to a copy of your device. It will                                     be given the same name as your device by default, but they can change it                                     to whatever they like afterwards."},{header:"2/3: Sharing ",text:"<b>What isn't shared?</b><br/><br/>                                     You will still be the owner of the device and the data. Your friend can't                                    give shared access to someone else. And you can remove the shared user at any time."},{header:"3/3: Sharing ",text:"<b>We'll let them know!</b><br/><br/>                                    When you share access with someone, we'll send them an email to let them know. If                                     they don't have an account yet, we'll send them a link to help them get set up!"}]}return n.prototype.ngOnInit=function(){var n=this;this.ga.sendPageView("device-share","device-share"),this.deviceId=this.route.snapshot.paramMap.get("deviceId"),this.fromMain=this.route.snapshot.queryParamMap.get("fromMain"),console.log(this.fromMain),this.storage.get("myDevices").then(function(e){n.monkeyDevice=e.find(function(e){return e.deviceId===n.deviceId}),"child"===n.monkeyDevice.share[0]&&(n.isActualOwner=!1),console.log("MonkeyDevice = ",n.monkeyDevice),n.updateButton()}),this.storage.get("username").then(function(e){n.username=e})},n.prototype.addShare=function(){return o.a(this,void 0,void 0,function(){var n=this;return o.c(this,function(e){switch(e.label){case 0:return console.log("add new share"),[4,this.alertCtrl.create({header:"Share "+this.monkeyDevice.name,subHeader:"Enter your friend's email address",inputs:[{name:"Value",placeholder:"myFriend@monkeytronics.co.nz",id:"maxLength40"}],buttons:[{text:"Cancel",role:"cancel",handler:function(n){console.log("Cancel clicked")}},{text:"Add",handler:function(e){n.monkeyDevice.share.push(e.Value.toLowerCase()),n.updateDevice(),n.ga.eventEmitter("Share-Add","Add- "+e.Value,n.monkeyDevice.share.length,1)}}]})];case 1:return[4,e.sent().present().then(function(n){document.getElementById("maxLength40").setAttribute("maxlength","40")})];case 2:return e.sent(),[2]}})})},n.prototype.deleteShare=function(n){console.log("delete device # ",n),this.ga.eventEmitter("Share-Delete","Delete- "+this.monkeyDevice.share[n],this.monkeyDevice.share.length,1),this.monkeyDevice.share.splice(n,1),this.updateDevice()},n.prototype.updateDevice=function(){return o.a(this,void 0,void 0,function(){var n,e,l,t,u,r=this;return o.c(this,function(o){switch(o.label){case 0:return console.log("Updating Device",this.monkeyDevice),[4,this.loadingCtrl.create({message:"Updating List"})];case 1:return[4,(n=o.sent()).present()];case 2:o.sent(),o.label=3;case 3:return o.trys.push([3,7,,8]),[4,this.sensorNodeApi.putDevice(this.monkeyDevice)];case 4:return e=o.sent(),console.log("Success :",e),[4,this.storage.get("myDevices")];case 5:return l=o.sent(),console.log("MonkeyDevices before = ",l),t=l.findIndex(function(n){return n.deviceId===r.deviceId}),l[t]=this.monkeyDevice,console.log("myDevices to set  = ",l),[4,this.storage.set("myDevices",l)];case 6:return o.sent(),this.updateButton(),[3,8];case 7:return u=o.sent(),console.log("Failed : ",u),[3,8];case 8:return n.dismiss(),[2]}})})},n.prototype.goBack=function(){"true"===this.fromMain?this.redirectService.redirect("/my-devices"):this.redirectService.redirect("/device/data/",this.deviceId,"?customRange=check")},n.prototype.updateButton=function(){this.enableAdd=this.monkeyDevice.share.length<5,console.log(this.enableAdd)},n.prototype.showHelp=function(n){return o.a(this,void 0,void 0,function(){var e,l,t=this;return o.c(this,function(o){switch(o.label){case 0:return e="help-alert-class",this.platform.is("cordova")&&(e="help-alert-mobile-class"),[4,this.alertCtrl.create({cssClass:e,header:this.helpPopUp[n].header,message:this.helpPopUp[n].text,buttons:[{text:"Next",handler:function(){return l.dismiss().then(function(){if(!(n<t.helpPopUp.length-1))return!0;t.showHelp(n+1)}),!1}},{text:"Cancel",role:"cancel",handler:function(n){console.log("Cancel clicked")}}]})];case 1:return[4,(l=o.sent()).present()];case 2:return o.sent(),[2]}})})},n}(),a=function(){return function(){}}(),h=l("pMnS"),b=l("oBZk"),d=l("Ip0R"),p=l("iw74"),g=l("ZYCi"),f=t.nb({encapsulation:0,styles:[[""]],data:{}});function m(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,7,"ion-item",[["lines","none"]],null,null,null,b.lb,b.u)),t.ob(1,49152,null,0,u.I,[t.h,t.k],{lines:[0,"lines"]},null),(n()(),t.pb(2,0,null,0,5,"ion-label",[],null,null,null,b.mb,b.v)),t.ob(3,49152,null,0,u.O,[t.h,t.k],null,null),(n()(),t.pb(4,0,null,0,3,"ion-text",[],null,null,null,b.Cb,b.L)),t.ob(5,49152,null,0,u.xb,[t.h,t.k],null,null),(n()(),t.pb(6,0,null,0,1,"h5",[["style","font-size: 1.2rem;"],["text-center",""]],null,null,null,null,null)),(n()(),t.Gb(-1,null,[" Share This Device with friends and family "]))],function(n,e){n(e,1,0,"none")},null)}function v(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,7,"ion-item",[["lines","none"]],null,null,null,b.lb,b.u)),t.ob(1,49152,null,0,u.I,[t.h,t.k],{lines:[0,"lines"]},null),(n()(),t.pb(2,0,null,0,5,"ion-label",[],null,null,null,b.mb,b.v)),t.ob(3,49152,null,0,u.O,[t.h,t.k],null,null),(n()(),t.pb(4,0,null,0,3,"ion-text",[],null,null,null,b.Cb,b.L)),t.ob(5,49152,null,0,u.xb,[t.h,t.k],null,null),(n()(),t.pb(6,0,null,0,1,"h5",[["style","font-size: 1.2rem;"],["text-center",""]],null,null,null,null,null)),(n()(),t.Gb(-1,null,[" You have shared access only "]))],function(n,e){n(e,1,0,"none")},null)}function k(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,2,"ion-button",[["expand","block"],["margin-top","50px"]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.addShare()&&t),t},b.U,b.d)),t.ob(1,49152,null,0,u.l,[t.h,t.k],{disabled:[0,"disabled"],expand:[1,"expand"]},null),(n()(),t.Gb(-1,0,[" Add Friend "]))],function(n,e){n(e,1,0,!e.component.enableAdd,"block")},null)}function y(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,15,"ion-item",[["class","myNewClass"],["no-padding",""]],null,null,null,b.lb,b.u)),t.ob(1,278528,null,0,d.j,[t.s,t.t,t.k,t.D],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.ob(2,49152,null,0,u.I,[t.h,t.k],null,null),(n()(),t.pb(3,0,null,0,2,"ion-thumbnail",[["slot","start"]],null,null,null,b.Db,b.M)),t.ob(4,49152,null,0,u.zb,[t.h,t.k],null,null),(n()(),t.pb(5,0,null,0,0,"img",[["src","assets/images/shareAvatar.svg"]],null,null,null,null,null)),(n()(),t.pb(6,0,null,0,5,"ion-label",[["no-padding",""]],null,null,null,b.mb,b.v)),t.ob(7,49152,null,0,u.O,[t.h,t.k],null,null),(n()(),t.pb(8,0,null,0,3,"ion-text",[["color","dark"]],null,null,null,b.Cb,b.L)),t.ob(9,49152,null,0,u.xb,[t.h,t.k],{color:[0,"color"]},null),(n()(),t.pb(10,0,null,0,1,"h4",[["class","device-name-text"],["item-title",""],["style","font-size: 1rem;"],["text-center",""]],null,null,null,null,null)),(n()(),t.Gb(11,null,[" "," "])),(n()(),t.pb(12,0,null,0,3,"ion-button",[["fill","outline"],["no-padding",""],["strong","true"]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.deleteShare(n.context.index)&&t),t},b.U,b.d)),t.ob(13,49152,null,0,u.l,[t.h,t.k],{fill:[0,"fill"],strong:[1,"strong"]},null),(n()(),t.pb(14,0,null,0,1,"ion-icon",[["name","close"],["slot","icon-only"]],null,null,null,b.jb,b.s)),t.ob(15,49152,null,0,u.D,[t.h,t.k],{name:[0,"name"]},null)],function(n,e){n(e,1,0,"myNewClass",e.component.animateClass),n(e,9,0,"dark"),n(e,13,0,"outline","true"),n(e,15,0,"close")},function(n,e){n(e,11,0,e.context.$implicit)})}function w(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,2,"div",[],null,null,null,null,null)),(n()(),t.gb(16777216,null,null,1,null,y)),t.ob(2,278528,null,0,d.k,[t.O,t.L,t.s],{ngForOf:[0,"ngForOf"]},null)],function(n,e){var l=e.component;n(e,2,0,null==l.monkeyDevice?null:l.monkeyDevice.share)},null)}function I(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,17,"ion-header",[],null,null,null,b.ib,b.r)),t.ob(1,49152,null,0,u.C,[t.h,t.k],null,null),(n()(),t.pb(2,0,null,0,15,"ion-toolbar",[],null,null,null,b.Gb,b.P)),t.ob(3,49152,null,0,u.Cb,[t.h,t.k],null,null),(n()(),t.pb(4,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,b.V,b.e)),t.ob(5,49152,null,0,u.m,[t.h,t.k],null,null),(n()(),t.pb(6,0,null,0,2,"ion-back-button",[],null,[[null,"click"]],function(n,e,l){var o=!0;return"click"===e&&(o=!1!==t.zb(n,8).onClick(l)&&o),o},b.S,b.b)),t.ob(7,49152,null,0,u.h,[t.h,t.k],null,null),t.ob(8,16384,null,0,u.i,[[2,u.ib],u.Jb],null,null),(n()(),t.pb(9,0,null,0,2,"ion-title",[],null,null,null,b.Eb,b.N)),t.ob(10,49152,null,0,u.Ab,[t.h,t.k],null,null),(n()(),t.Gb(11,0,["Share ",""])),(n()(),t.pb(12,0,null,0,5,"ion-buttons",[["slot","end"]],null,null,null,b.V,b.e)),t.ob(13,49152,null,0,u.m,[t.h,t.k],null,null),(n()(),t.pb(14,0,null,0,3,"ion-button",[],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.showHelp(0)&&t),t},b.U,b.d)),t.ob(15,49152,null,0,u.l,[t.h,t.k],null,null),(n()(),t.pb(16,0,null,0,1,"ion-icon",[["name","ios-help-circle-outline"],["slot","icon-only"]],null,null,null,b.jb,b.s)),t.ob(17,49152,null,0,u.D,[t.h,t.k],{name:[0,"name"]},null),(n()(),t.pb(18,0,null,null,31,"ion-content",[],null,null,null,b.eb,b.n)),t.ob(19,49152,null,0,u.v,[t.h,t.k],null,null),(n()(),t.pb(20,0,null,0,29,"ion-list",[["text-wrap",""]],null,null,null,b.nb,b.w)),t.ob(21,49152,null,0,u.P,[t.h,t.k],null,null),(n()(),t.pb(22,0,null,0,0,"p",[["style","padding-top: 20px;"]],null,null,null,null,null)),(n()(),t.pb(23,0,null,0,8,"ion-row",[],null,null,null,b.sb,b.B)),t.ob(24,49152,null,0,u.jb,[t.h,t.k],null,null),(n()(),t.pb(25,0,null,0,1,"ion-col",[],null,null,null,b.db,b.m)),t.ob(26,49152,null,0,u.u,[t.h,t.k],null,null),(n()(),t.pb(27,0,null,0,2,"ion-col",[["size","4"],["size-lg","2"],["size-md","3"],["size-xl","2"]],null,null,null,b.db,b.m)),t.ob(28,49152,null,0,u.u,[t.h,t.k],{size:[0,"size"]},null),(n()(),t.pb(29,0,null,0,0,"img",[["alt","familySharing"],["src","assets/images/share.svg"],["style","width: 100%;"]],null,null,null,null,null)),(n()(),t.pb(30,0,null,0,1,"ion-col",[],null,null,null,b.db,b.m)),t.ob(31,49152,null,0,u.u,[t.h,t.k],null,null),(n()(),t.pb(32,0,null,0,0,"p",[["style","padding-top: 20px;"]],null,null,null,null,null)),(n()(),t.pb(33,0,null,0,16,"ion-row",[["justify-content-center",""]],null,null,null,b.sb,b.B)),t.ob(34,49152,null,0,u.jb,[t.h,t.k],null,null),(n()(),t.pb(35,0,null,0,14,"ion-col",[["size","12"],["size-md","6"],["size-xl","4"]],null,null,null,b.db,b.m)),t.ob(36,49152,null,0,u.u,[t.h,t.k],{size:[0,"size"]},null),(n()(),t.gb(16777216,null,0,1,null,m)),t.ob(38,16384,null,0,d.l,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(n()(),t.gb(16777216,null,0,1,null,v)),t.ob(40,16384,null,0,d.l,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(n()(),t.pb(41,0,null,0,0,"p",[["style","padding-top: 20px;"]],null,null,null,null,null)),(n()(),t.gb(16777216,null,0,1,null,k)),t.ob(43,16384,null,0,d.l,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(n()(),t.pb(44,0,null,0,2,"ion-button",[["expand","block"],["fill","outline"],["margin-top","50px"]],null,[[null,"click"]],function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.goBack()&&t),t},b.U,b.d)),t.ob(45,49152,null,0,u.l,[t.h,t.k],{expand:[0,"expand"],fill:[1,"fill"]},null),(n()(),t.Gb(-1,0,[" Done "])),(n()(),t.pb(47,0,null,0,0,"p",[["style","padding-top: 10px;"]],null,null,null,null,null)),(n()(),t.gb(16777216,null,0,1,null,w)),t.ob(49,16384,null,0,d.l,[t.O,t.L],{ngIf:[0,"ngIf"]},null)],function(n,e){var l=e.component;n(e,17,0,"ios-help-circle-outline"),n(e,28,0,"4"),n(e,36,0,"12"),n(e,38,0,l.isActualOwner),n(e,40,0,!l.isActualOwner),n(e,43,0,l.isActualOwner),n(e,45,0,"block","outline"),n(e,49,0,l.isActualOwner)},function(n,e){var l=e.component;n(e,11,0,null==l.monkeyDevice?null:l.monkeyDevice.name)})}function x(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,1,"app-sharing",[],null,null,null,I,f)),t.ob(1,114688,null,0,c,[p.b,r.a,u.Lb,u.Gb,u.b,g.m,g.a,s.a,i.a],null,null)],function(n,e){n(e,1,0)},null)}var A=t.lb("app-sharing",c,x,{},{},[]),S=l("gIcY");l.d(e,"SharingPageModuleNgFactory",function(){return D});var D=t.mb(a,[],function(n){return t.wb([t.xb(512,t.j,t.bb,[[8,[h.a,A]],[3,t.j],t.x]),t.xb(4608,d.n,d.m,[t.u,[2,d.x]]),t.xb(4608,S.o,S.o,[]),t.xb(4608,u.c,u.c,[t.z,t.g]),t.xb(4608,u.Ib,u.Ib,[u.c,t.j,t.q,d.d]),t.xb(4608,u.Mb,u.Mb,[u.c,t.j,t.q,d.d]),t.xb(1073742336,d.c,d.c,[]),t.xb(1073742336,S.m,S.m,[]),t.xb(1073742336,S.b,S.b,[]),t.xb(1073742336,u.Eb,u.Eb,[]),t.xb(1073742336,g.o,g.o,[[2,g.v],[2,g.m]]),t.xb(1073742336,a,a,[]),t.xb(1024,g.k,function(){return[[{path:"",component:c}]]},[])])})},mcMp:function(n,e,l){"use strict";l.d(e,"a",function(){return c});var t=l("mrSG"),o=l("ccyI"),u=l("sE5F"),r=l("67Y/"),i=l("CcnG"),s="https://g9spnwib9k.execute-api.ap-southeast-2.amazonaws.com/v1/",c=function(){function n(n,e){this.http=n,this.authService=e}return n.prototype.removeIllegalChars=function(n){var e=JSON.stringify(n);return console.log("tempStr = "+e),e=e.replace(/[']/g,""),JSON.parse(e)},n.prototype.putReport=function(n,e,l,t){var o=this;return new Promise(function(i,c){o.authService.getAuthenticatedUser().getSession(function(a,h){if(a)return console.log("Error refreshing user session in get Put Report method.",a),c(a);o.http.put(s+"report/?fromTime="+e+"&toTime="+l+"&proxyEmail="+t,n,{headers:new u.d({Authorization:h.getIdToken().getJwtToken()})}).pipe(Object(r.a)(function(n){return n.json()})).subscribe(function(n){return console.log("data : ",n),i(n)},function(n){return console.log("Error in subscribe block. ",n),c(n)})})})},n.prototype.putReportAnalytics=function(n,e,l,t,o,i){var c=this;return new Promise(function(a,h){c.authService.getAuthenticatedUser().getSession(function(b,d){if(b)return console.log("Error refreshing user session in get Put Report method.",b),h(b);c.http.put(s+"report-analytics/?fromTime="+e+"&toTime="+l+"&proxyEmail="+t+"&rmdFile="+o+"&reportParams="+i,n,{headers:new u.d({Authorization:d.getIdToken().getJwtToken()})}).pipe(Object(r.a)(function(n){return n.json()})).subscribe(function(n){return console.log("data : ",n),a(n)},function(n){return console.log("Error in subscribe block. ",n),h(n)})})})},n.prototype.getDeviceData=function(n,e,l){var t=this;return console.log("Let's grab some data for device : "+n),new Promise(function(o,i){t.authService.getAuthenticatedUser().getSession(function(c,a){if(c)return console.log("Error refreshing user session in get Data method.",c),i(c);t.http.get(s+"data/"+n+"?fromTime="+e+"&toTime="+l,{headers:new u.d({Authorization:a.getIdToken().getJwtToken()})}).pipe(Object(r.a)(function(n){return n.json()})).subscribe(function(e){try{if("all"===n){var l=e.body.filter(function(n){return"C"===n.id.charAt(0)||"W"===n.id.charAt(0)||"S"===n.id.charAt(0)||"F"===n.id.charAt(0)||"P"===n.id.charAt(0)||n.id.charAt(0)<="9"});e.body=l}}catch(c){console.log("GetDeviceError = ",c)}return o(e)},function(n){return console.log("Error in subscribe block. ",n),i(n)})})})},n.prototype.deleteData=function(n){console.log("deleting Device Data : ",n);var e=this;return new Promise(function(l,t){e.authService.getAuthenticatedUser().getSession(function(o,i){if(o)return console.log("Error refreshing user session in delete Data method.",o),t(o);e.http.delete(s+"data/"+n,{headers:new u.d({Authorization:i.getIdToken().getJwtToken()})}).pipe(Object(r.a)(function(n){return n.json()})).subscribe(function(n){return console.log("data : ",n),l(n)},function(n){return console.log("Error in subscribe block. ",n),t(n)})})})},n.prototype.getDeviceList=function(n){var e=this;return new Promise(function(l,t){e.authService.getAuthenticatedUser().getSession(function(o,i){if(o)return console.log("Error refreshing user session",o),t(o);console.log("inside authservice get session."),e.http.get(s+"devices/"+n,{headers:new u.d({Authorization:i.getIdToken().getJwtToken()})}).pipe(Object(r.a)(function(n){return n.json()})).subscribe(function(n){var e=n.body.filter(function(n){return"C"===n.deviceId.charAt(0)||"W"===n.deviceId.charAt(0)||"S"===n.deviceId.charAt(0)||"F"===n.deviceId.charAt(0)||"P"===n.deviceId.charAt(0)||n.deviceId.charAt(0)<="9"});return l(e)},function(n){return console.log("Error in subscribe block. ",n),t(n)})})})},n.prototype.putDevice=function(n){var e=this;return console.log("putting device: ",n),n=this.removeIllegalChars(n),console.log("clean device: ",n),new Promise(function(l,t){e.authService.getAuthenticatedUser().getSession(function(o,i){if(o)return console.log("Error refreshing user session",o),t(o);console.log("inside authservice get session."),e.http.put(s+"devices/"+n.deviceId,n,{headers:new u.d({Authorization:i.getIdToken().getJwtToken()})}).pipe(Object(r.a)(function(n){return n.json()})).subscribe(function(n){return console.log("data : ",n),l(n)},function(n){return console.log("Error in subscribe block. ",n),t(n)})})})},n.prototype.putIntervention=function(n,e){var l=this;console.log("putting intervention: ",e),e=this.removeIllegalChars(e);for(var t=0,o=Object.keys(e);t<o.length;t++){var i=o[t];""===e[i]&&(e[i]=" ");try{if(Array.isArray(e[i]))for(var c=0;c<e[i].length;c++)""===e[i][c]&&e[i].splice(c,1)}catch(a){console.log("Error removing empty array object: ",i,e[i],a)}}return console.log("after replacing empty strings: ",e),new Promise(function(t,o){l.authService.getAuthenticatedUser().getSession(function(i,c){if(i)return console.log("Error refreshing user session",i),o(i);console.log("inside authservice get session."),l.http.put(s+"intervention/"+n,e,{headers:new u.d({Authorization:c.getIdToken().getJwtToken()})}).pipe(Object(r.a)(function(n){return n.json()})).subscribe(function(n){return console.log("data : ",n),t(n)},function(n){return console.log("Error in subscribe block. ",n),o(n)})})})},n.prototype.deleteIntervention=function(n,e){console.log("deleting Intervention from - ",n);var l=this;return new Promise(function(t,o){l.authService.getAuthenticatedUser().getSession(function(i,c){if(i)return console.log("Error refreshing user session in delete intervention method.",i),o(i);l.http.delete(s+"intervention/"+n+"?ts="+e.ts,{headers:new u.d({Authorization:c.getIdToken().getJwtToken()})}).pipe(Object(r.a)(function(n){return n.json()})).subscribe(function(n){return console.log("data : ",n),t(n)},function(n){return console.log("Error in subscribe block. ",n),o(n)})})})},n.prototype.getInterventions=function(n){var e=this;return new Promise(function(l,t){e.authService.getAuthenticatedUser().getSession(function(o,i){if(o)return console.log("Error refreshing user session",o),t(o);console.log("inside authservice get session."),e.http.get(s+"intervention/"+n,{headers:new u.d({Authorization:i.getIdToken().getJwtToken()})}).pipe(Object(r.a)(function(n){return n.json()})).subscribe(function(n){return console.log("data in api service : ",n),l(n)},function(n){return console.log("Error in subscribe block. ",n),t(n)})})})},n.prototype.putUserSupport=function(n){return t.a(this,void 0,void 0,function(){var e=this;return t.c(this,function(l){switch(l.label){case 0:return[4,this.authService.getAttribute("preferred_username")];case 1:return l.sent(),[2,new Promise(function(l,t){e.authService.getAuthenticatedUser().getSession(function(o,i){if(o)return console.log("Error refreshing user session",o),t(o);var c="?searchVal="+n;console.log("inside authservice get session."),e.http.put(s+"user-support/"+c,{supportDescription:n},{headers:new u.d({Authorization:i.getIdToken().getJwtToken()})}).pipe(Object(r.a)(function(n){return n.json()})).subscribe(function(n){return console.log("data : ",n),l(n)},function(n){return console.log("Error in subscribe block. ",n),t(n)})})})]}})})},n.ngInjectableDef=i.S({factory:function(){return new n(i.W(u.e),i.W(o.a))},token:n,providedIn:"root"}),n}()}}]);