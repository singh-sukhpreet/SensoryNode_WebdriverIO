(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{VJ5f:function(n,l,e){"use strict";e.r(l);var t=e("CcnG"),u=e("mrSG"),o=e("ZZ/e"),i=e("mMyO"),r=e("mcMp"),s=e("Gs5E"),a=function(){function n(n,l,e,t,u,o,i,r,s,a){this.storage=n,this.sensorNodeApi=l,this.platform=e,this.loadingCtrl=t,this.alertCtrl=u,this.router=o,this.route=i,this.ga=r,this.zone=s,this.redirectService=a,this.alertProperties=[],this.alertPropertiesReadable=[],this.newAlert={},this.alertArray=[],this.autoAlerts=!0,this.ignoreToggleChange=!1}return n.prototype.ngOnInit=function(){var n=this;this.ga.sendPageView("update-alerts","update-alerts"),this.deviceId=this.route.snapshot.paramMap.get("deviceId"),this.storage.get("myDevices").then(function(l){n.monkeyDevice=l.find(function(l){return l.deviceId===n.deviceId}),console.log("monkey device = ",n.monkeyDevice),n.loadValidDataTypes(),n.getAlerts()})},n.prototype.loadValidDataTypes=function(){"TH"===this.monkeyDevice.dataType?(this.alertProperties.push("temp","hum"),this.alertPropertiesReadable.push("temperature","humidity")):"CD"===this.monkeyDevice.dataType?(this.alertProperties.push("temp","hum","co2"),this.alertPropertiesReadable.push("temperature (\xb0C)","humidity (%)","CO\u2082 (ppm)")):"CL"===this.monkeyDevice.dataType?(this.alertProperties.push("temp","hum","co2","lux","dba"),this.alertPropertiesReadable.push("temperature (\xb0C)","humidity (%)","CO\u2082 (ppm)","lighting (lux)","sound level (dBA)")):"PM"===this.monkeyDevice.dataType?(this.alertProperties.push("pm1","pm2_5","pm10"),this.alertPropertiesReadable.push("particulate matter 1\u03bcg (\u03bcg/m\xb3)","particulate matter 2.5\u03bcg (\u03bcg/m\xb3)","particulate matter 10\u03bcg (\u03bcg/m\xb3)")):"FO"===this.monkeyDevice.dataType&&(this.alertProperties.push("temp","hum","HCHO"),this.alertPropertiesReadable.push("temperature (\xb0C)","humidity (%)","Formaldehyde (ppb)"))},n.prototype.getAlerts=function(){console.log("custom alert array ",this.monkeyDevice.deviceSettings.customAlerts),console.log("custom alert array ",this.monkeyDevice.deviceSettings);try{this.alertArray=this.monkeyDevice.deviceSettings.customAlerts?this.monkeyDevice.deviceSettings.customAlerts:[]}catch(n){console.log("invalid monkeyDevice.deviceSettings.customAlerts = ",this.monkeyDevice.deviceSettings.customAlerts),this.alertArray=[]}console.log("this.alertArray = ",this.alertArray);try{this.autoAlerts=!this.monkeyDevice.deviceSettings.autoAlerts||this.monkeyDevice.deviceSettings.autoAlerts}catch(n){console.log("invalid monkeyDevice.deviceSettings.autoAlerts = ",this.monkeyDevice.deviceSettings.autoAlerts),this.autoAlerts=!0}console.log("this.autoAlerts = ",this.autoAlerts)},n.prototype.updateDevice=function(n,l,e){return u.a(this,void 0,void 0,function(){var t,o=this;return u.c(this,function(i){switch(i.label){case 0:return this.ignoreToggleChange?[2]:[4,this.alertCtrl.create({header:"Confirm Changes",message:"Update Changes to Alerts",buttons:[{text:"OK",handler:function(){return u.a(o,void 0,void 0,function(){var o,i,r,s,a,c,b,d=this;return u.c(this,function(u){switch(u.label){case 0:return[4,this.loadingCtrl.create({message:"Updating Alerts"})];case 1:return[4,(o=u.sent()).present()];case 2:u.sent(),i=t.dismiss(),r=this.alertArray,"custom"===n?(r.push(this.newAlert),this.monkeyDevice.deviceSettings.customAlerts=r):"auto"===n?this.monkeyDevice.deviceSettings.autoAlerts=this.autoAlerts:"deleteRecord"===n&&(r.splice(e,1),this.monkeyDevice.deviceSettings.customAlerts=r),this.alertArray=r,u.label=3;case 3:return u.trys.push([3,7,,8]),console.log(this.monkeyDevice),[4,this.sensorNodeApi.putDevice(this.monkeyDevice)];case 4:return s=u.sent(),console.log("Success :",s),[4,this.storage.get("myDevices")];case 5:return a=u.sent(),console.log("MonkeyDevices before = ",a),c=a.findIndex(function(n){return n.deviceId===d.deviceId}),a[c]=this.monkeyDevice,console.log("myDevices to set  = ",a),[4,this.storage.set("myDevices",a)];case 6:return u.sent(),[3,8];case 7:return b=u.sent(),console.log("Failed : ",b),[3,8];case 8:return this.zone.run(function(){d.newAlert={},l.resetForm(),o.dismiss()}),i.then(function(){}),[2]}})})}},{text:"Cancel",role:"cancel",handler:function(){"auto"===n&&(o.ignoreToggleChange=!0,o.autoAlerts=!o.autoAlerts,setTimeout(function(){o.ignoreToggleChange=!1},250)),console.log("Cancel clicked")}}]})];case 1:return[4,(t=i.sent()).present()];case 2:return i.sent(),[2]}})})},n.prototype.goBack=function(){this.redirectService.redirect("/device/data/",this.deviceId,"?customRange=check")},n}(),c=function(){return function(){}}(),b=e("pMnS"),d=e("oBZk"),g=e("Ip0R"),h=e("gIcY"),p=e("iw74"),m=e("ZYCi"),f=t.nb({encapsulation:0,styles:[[""]],data:{}});function v(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,3,null,null,null,null,null,null,null)),(n()(),t.pb(1,0,null,null,2,"ion-select-option",[],null,null,null,d.wb,d.G)),t.ob(2,49152,null,0,o.ob,[t.h,t.k],{value:[0,"value"]},null),(n()(),t.Gb(3,0,["",""]))],function(n,l){n(l,2,0,t.rb(1,"",l.context.$implicit,""))},function(n,l){n(l,3,0,l.component.alertPropertiesReadable[l.context.index])})}function k(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,7,"ion-item",[["lines","none"]],null,null,null,d.lb,d.u)),t.ob(1,49152,null,0,o.I,[t.h,t.k],{lines:[0,"lines"]},null),(n()(),t.pb(2,0,null,0,5,"ion-label",[],null,null,null,d.mb,d.v)),t.ob(3,49152,null,0,o.O,[t.h,t.k],null,null),(n()(),t.pb(4,0,null,0,3,"ion-text",[],null,null,null,d.Cb,d.L)),t.ob(5,49152,null,0,o.xb,[t.h,t.k],null,null),(n()(),t.pb(6,0,null,0,1,"h5",[["style","font-size: 1.2rem;"],["text-center",""]],null,null,null,null,null)),(n()(),t.Gb(-1,null,[" Active Custom Alerts "]))],function(n,l){n(l,1,0,"none")},null)}function y(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),t.Gb(-1,null,[" \u2265 "]))],null,null)}function C(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),t.Gb(-1,null,[" \u2264 "]))],null,null)}function A(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,32,"div",[["class","myNewClass"],["no-padding",""]],null,null,null,null,null)),t.ob(1,278528,null,0,g.j,[t.s,t.t,t.k,t.D],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(n()(),t.pb(2,0,null,null,30,"ion-card",[["no-padding",""]],null,null,null,d.ab,d.f)),t.ob(3,49152,null,0,o.n,[t.h,t.k],null,null),(n()(),t.pb(4,0,null,0,14,"ion-item",[["lines","none"]],null,null,null,d.lb,d.u)),t.ob(5,49152,null,0,o.I,[t.h,t.k],{lines:[0,"lines"]},null),(n()(),t.pb(6,0,null,0,9,"ion-chip",[["color","primary"],["outline","outline"],["slot","start"]],null,null,null,d.cb,d.l)),t.ob(7,49152,null,0,o.t,[t.h,t.k],{color:[0,"color"],outline:[1,"outline"]},null),(n()(),t.pb(8,0,null,0,7,"ion-label",[],null,null,null,d.mb,d.v)),t.ob(9,49152,null,0,o.O,[t.h,t.k],null,null),(n()(),t.Gb(10,0,[" "," "])),(n()(),t.gb(16777216,null,0,1,null,y)),t.ob(12,16384,null,0,g.l,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(n()(),t.gb(16777216,null,0,1,null,C)),t.ob(14,16384,null,0,g.l,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(n()(),t.Gb(15,0,[" "," "])),(n()(),t.pb(16,0,null,0,2,"ion-label",[],null,null,null,d.mb,d.v)),t.ob(17,49152,null,0,o.O,[t.h,t.k],null,null),(n()(),t.Gb(18,0,["Send at most once per "," "])),(n()(),t.pb(19,0,null,0,13,"ion-footer",[],null,null,null,d.gb,d.p)),t.ob(20,49152,null,0,o.A,[t.h,t.k],null,null),(n()(),t.pb(21,0,null,0,11,"ion-row",[],null,null,null,d.sb,d.B)),t.ob(22,49152,null,0,o.jb,[t.h,t.k],null,null),(n()(),t.pb(23,0,null,0,1,"ion-col",[],null,null,null,d.db,d.m)),t.ob(24,49152,null,0,o.u,[t.h,t.k],null,null),(n()(),t.pb(25,0,null,0,1,"ion-col",[],null,null,null,d.db,d.m)),t.ob(26,49152,null,0,o.u,[t.h,t.k],null,null),(n()(),t.pb(27,0,null,0,5,"ion-col",[["center",""],["text-center",""]],null,null,null,d.db,d.m)),t.ob(28,49152,null,0,o.u,[t.h,t.k],null,null),(n()(),t.pb(29,0,null,0,3,"ion-button",[["color","primary"],["expand","block"],["fill","clear"]],null,[[null,"click"]],function(n,l,e){var u=!0;return"click"===l&&(u=!1!==n.component.updateDevice("deleteRecord",t.zb(n.parent,53),n.context.index)&&u),u},d.U,d.d)),t.ob(30,49152,null,0,o.l,[t.h,t.k],{color:[0,"color"],expand:[1,"expand"],fill:[2,"fill"]},null),(n()(),t.pb(31,0,null,0,1,"ion-icon",[["name","trash"]],null,null,null,d.jb,d.s)),t.ob(32,49152,null,0,o.D,[t.h,t.k],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"myNewClass",l.component.animateClass),n(l,5,0,"none"),n(l,7,0,"primary","outline"),n(l,12,0,"greater than"==l.context.$implicit.operator),n(l,14,0,"less than"==l.context.$implicit.operator),n(l,30,0,"primary","block","clear"),n(l,32,0,"trash")},function(n,l){n(l,10,0,l.context.$implicit.property),n(l,15,0,l.context.$implicit.threshold),n(l,18,0,l.context.$implicit.frequency)})}function z(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,11,"ion-header",[],null,null,null,d.ib,d.r)),t.ob(1,49152,null,0,o.C,[t.h,t.k],null,null),(n()(),t.pb(2,0,null,0,9,"ion-toolbar",[],null,null,null,d.Gb,d.P)),t.ob(3,49152,null,0,o.Cb,[t.h,t.k],null,null),(n()(),t.pb(4,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,d.V,d.e)),t.ob(5,49152,null,0,o.m,[t.h,t.k],null,null),(n()(),t.pb(6,0,null,0,2,"ion-back-button",[],null,[[null,"click"]],function(n,l,e){var u=!0;return"click"===l&&(u=!1!==t.zb(n,8).onClick(e)&&u),u},d.S,d.b)),t.ob(7,49152,null,0,o.h,[t.h,t.k],null,null),t.ob(8,16384,null,0,o.i,[[2,o.ib],o.Jb],null,null),(n()(),t.pb(9,0,null,0,2,"ion-title",[],null,null,null,d.Eb,d.N)),t.ob(10,49152,null,0,o.Ab,[t.h,t.k],null,null),(n()(),t.Gb(-1,0,["Configure Alerts"])),(n()(),t.pb(12,0,null,null,138,"ion-content",[],null,null,null,d.eb,d.n)),t.ob(13,49152,null,0,o.v,[t.h,t.k],null,null),(n()(),t.pb(14,0,null,0,136,"ion-list",[["text-wrap",""]],null,null,null,d.nb,d.w)),t.ob(15,49152,null,0,o.P,[t.h,t.k],null,null),(n()(),t.pb(16,0,null,0,0,"p",[["style","padding-top: 20px;"]],null,null,null,null,null)),(n()(),t.pb(17,0,null,0,8,"ion-row",[],null,null,null,d.sb,d.B)),t.ob(18,49152,null,0,o.jb,[t.h,t.k],null,null),(n()(),t.pb(19,0,null,0,1,"ion-col",[],null,null,null,d.db,d.m)),t.ob(20,49152,null,0,o.u,[t.h,t.k],null,null),(n()(),t.pb(21,0,null,0,2,"ion-col",[["size","4"],["size-lg","2"],["size-md","3"],["size-xl","2"]],null,null,null,d.db,d.m)),t.ob(22,49152,null,0,o.u,[t.h,t.k],{size:[0,"size"]},null),(n()(),t.pb(23,0,null,0,0,"img",[["alt","dataRange"],["src","assets/images/alerts.png"],["style","width: 100%;"]],null,null,null,null,null)),(n()(),t.pb(24,0,null,0,1,"ion-col",[],null,null,null,d.db,d.m)),t.ob(25,49152,null,0,o.u,[t.h,t.k],null,null),(n()(),t.pb(26,0,null,0,0,"p",[["style","padding-top: 20px;"]],null,null,null,null,null)),(n()(),t.pb(27,0,null,0,23,"ion-row",[["justify-content-center",""]],null,null,null,d.sb,d.B)),t.ob(28,49152,null,0,o.jb,[t.h,t.k],null,null),(n()(),t.pb(29,0,null,0,21,"ion-col",[["size","12"],["size-md","6"],["size-xl","4"]],null,null,null,d.db,d.m)),t.ob(30,49152,null,0,o.u,[t.h,t.k],{size:[0,"size"]},null),(n()(),t.pb(31,0,null,0,7,"ion-item",[["lines","none"]],null,null,null,d.lb,d.u)),t.ob(32,49152,null,0,o.I,[t.h,t.k],{lines:[0,"lines"]},null),(n()(),t.pb(33,0,null,0,5,"ion-label",[],null,null,null,d.mb,d.v)),t.ob(34,49152,null,0,o.O,[t.h,t.k],null,null),(n()(),t.pb(35,0,null,0,3,"ion-text",[],null,null,null,d.Cb,d.L)),t.ob(36,49152,null,0,o.xb,[t.h,t.k],null,null),(n()(),t.pb(37,0,null,0,1,"h5",[["style","font-size: 1.2rem;"],["text-center",""]],null,null,null,null,null)),(n()(),t.Gb(-1,null,[" Automated Alerts "])),(n()(),t.pb(39,0,null,0,11,"ion-item",[],null,null,null,d.lb,d.u)),t.ob(40,49152,null,0,o.I,[t.h,t.k],null,null),(n()(),t.pb(41,0,null,0,2,"ion-label",[],null,null,null,d.mb,d.v)),t.ob(42,49152,null,0,o.O,[t.h,t.k],null,null),(n()(),t.Gb(-1,0,[" Include CEN automated alerts "])),(n()(),t.pb(44,0,null,0,6,"ion-toggle",[["checked",""],["name","autoAlerts"],["slot","start"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"ionBlur"]],function(n,l,e){var u=!0,o=n.component;return"ionBlur"===l&&(u=!1!==t.zb(n,45)._handleBlurEvent()&&u),"ionChange"===l&&(u=!1!==t.zb(n,45)._handleIonChange(e.target.checked)&&u),"ngModelChange"===l&&(u=!1!==(o.autoAlerts=e)&&u),"ionChange"===l&&(u=!1!==o.updateDevice("auto",t.zb(n,53))&&u),u},d.Fb,d.O)),t.ob(45,16384,null,0,o.d,[t.k],null,null),t.Db(1024,null,h.f,function(n){return[n]},[o.d]),t.ob(47,671744,null,0,h.k,[[8,null],[8,null],[8,null],[6,h.f]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t.Db(2048,null,h.g,null,[h.k]),t.ob(49,16384,null,0,h.h,[[4,h.g]],null,null),t.ob(50,49152,null,0,o.Bb,[t.h,t.k],{name:[0,"name"],checked:[1,"checked"]},null),(n()(),t.pb(51,0,null,0,99,"form",[["novalidate",""],["style","width:100%;"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(n,l,e){var u=!0,o=n.component;return"submit"===l&&(u=!1!==t.zb(n,53).onSubmit(e)&&u),"reset"===l&&(u=!1!==t.zb(n,53).onReset()&&u),"ngSubmit"===l&&(u=!1!==o.updateDevice("custom",t.zb(n,53))&&u),u},null,null)),t.ob(52,16384,null,0,h.n,[],null,null),t.ob(53,4210688,[["addNewAlertForm",4]],0,h.j,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),t.Db(2048,null,h.a,null,[h.j]),t.ob(55,16384,null,0,h.i,[[4,h.a]],null,null),(n()(),t.pb(56,0,null,null,0,"p",[["style","padding-top: 20px;"]],null,null,null,null,null)),(n()(),t.pb(57,0,null,null,93,"ion-row",[["justify-content-center",""]],null,null,null,d.sb,d.B)),t.ob(58,49152,null,0,o.jb,[t.h,t.k],null,null),(n()(),t.pb(59,0,null,0,91,"ion-col",[["size","12"],["size-md","6"],["size-xl","4"]],null,null,null,d.db,d.m)),t.ob(60,49152,null,0,o.u,[t.h,t.k],{size:[0,"size"]},null),(n()(),t.pb(61,0,null,0,7,"ion-item",[["lines","none"]],null,null,null,d.lb,d.u)),t.ob(62,49152,null,0,o.I,[t.h,t.k],{lines:[0,"lines"]},null),(n()(),t.pb(63,0,null,0,5,"ion-label",[],null,null,null,d.mb,d.v)),t.ob(64,49152,null,0,o.O,[t.h,t.k],null,null),(n()(),t.pb(65,0,null,0,3,"ion-text",[],null,null,null,d.Cb,d.L)),t.ob(66,49152,null,0,o.xb,[t.h,t.k],null,null),(n()(),t.pb(67,0,null,0,1,"h5",[["style","font-size: 1.2rem;"],["text-center",""]],null,null,null,null,null)),(n()(),t.Gb(-1,null,[" Add Custom Alerts "])),(n()(),t.pb(69,0,null,0,15,"ion-item",[["padding-left",""]],null,null,null,d.lb,d.u)),t.ob(70,49152,null,0,o.I,[t.h,t.k],null,null),(n()(),t.pb(71,0,null,0,2,"ion-label",[["class","deviceview-heading-text"],["position","floating"]],null,null,null,d.mb,d.v)),t.ob(72,49152,null,0,o.O,[t.h,t.k],{position:[0,"position"]},null),(n()(),t.Gb(-1,0,["Set me an alert when "])),(n()(),t.pb(74,0,null,0,10,"ion-select",[["interface","action-sheet"],["mode","ios"],["name","ngAlertMeasurement"],["required",""]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(n,l,e){var u=!0,o=n.component;return"ionBlur"===l&&(u=!1!==t.zb(n,77)._handleBlurEvent()&&u),"ionChange"===l&&(u=!1!==t.zb(n,77)._handleChangeEvent(e.target.value)&&u),"ngModelChange"===l&&(u=!1!==(o.newAlert.property=e)&&u),u},d.xb,d.F)),t.ob(75,16384,null,0,h.l,[],{required:[0,"required"]},null),t.Db(1024,null,h.e,function(n){return[n]},[h.l]),t.ob(77,16384,null,0,o.Ob,[t.k],null,null),t.Db(1024,null,h.f,function(n){return[n]},[o.Ob]),t.ob(79,671744,[["ngAlertMeasurement",4]],0,h.k,[[2,h.a],[6,h.e],[8,null],[6,h.f]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t.Db(2048,null,h.g,null,[h.k]),t.ob(81,16384,null,0,h.h,[[4,h.g]],null,null),t.ob(82,49152,null,0,o.nb,[t.h,t.k],{mode:[0,"mode"],name:[1,"name"],interface:[2,"interface"]},null),(n()(),t.gb(16777216,null,0,1,null,v)),t.ob(84,278528,null,0,g.k,[t.O,t.L,t.s],{ngForOf:[0,"ngForOf"]},null),(n()(),t.pb(85,0,null,0,19,"ion-item",[["padding-left",""]],null,null,null,d.lb,d.u)),t.ob(86,49152,null,0,o.I,[t.h,t.k],null,null),(n()(),t.pb(87,0,null,0,2,"ion-label",[["class","deviceview-heading-text"],["position","floating"]],null,null,null,d.mb,d.v)),t.ob(88,49152,null,0,o.O,[t.h,t.k],{position:[0,"position"]},null),(n()(),t.Gb(-1,0,["is"])),(n()(),t.pb(90,0,null,0,14,"ion-select",[["interface","action-sheet"],["mode","ios"],["name","ngOperator"],["required",""]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(n,l,e){var u=!0,o=n.component;return"ionBlur"===l&&(u=!1!==t.zb(n,93)._handleBlurEvent()&&u),"ionChange"===l&&(u=!1!==t.zb(n,93)._handleChangeEvent(e.target.value)&&u),"ngModelChange"===l&&(u=!1!==(o.newAlert.operator=e)&&u),u},d.xb,d.F)),t.ob(91,16384,null,0,h.l,[],{required:[0,"required"]},null),t.Db(1024,null,h.e,function(n){return[n]},[h.l]),t.ob(93,16384,null,0,o.Ob,[t.k],null,null),t.Db(1024,null,h.f,function(n){return[n]},[o.Ob]),t.ob(95,671744,[["ngOperator",4]],0,h.k,[[2,h.a],[6,h.e],[8,null],[6,h.f]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t.Db(2048,null,h.g,null,[h.k]),t.ob(97,16384,null,0,h.h,[[4,h.g]],null,null),t.ob(98,49152,null,0,o.nb,[t.h,t.k],{mode:[0,"mode"],name:[1,"name"],interface:[2,"interface"]},null),(n()(),t.pb(99,0,null,0,2,"ion-select-option",[["value","greater than"]],null,null,null,d.wb,d.G)),t.ob(100,49152,null,0,o.ob,[t.h,t.k],{value:[0,"value"]},null),(n()(),t.Gb(-1,0,["greater than"])),(n()(),t.pb(102,0,null,0,2,"ion-select-option",[["value","less than"]],null,null,null,d.wb,d.G)),t.ob(103,49152,null,0,o.ob,[t.h,t.k],{value:[0,"value"]},null),(n()(),t.Gb(-1,0,["less than"])),(n()(),t.pb(105,0,null,0,13,"ion-item",[["padding-left",""]],null,null,null,d.lb,d.u)),t.ob(106,49152,null,0,o.I,[t.h,t.k],null,null),(n()(),t.pb(107,0,null,0,2,"ion-label",[["position","floating"]],null,null,null,d.mb,d.v)),t.ob(108,49152,null,0,o.O,[t.h,t.k],{position:[0,"position"]},null),(n()(),t.Gb(-1,0,["threshold value"])),(n()(),t.pb(110,0,null,0,8,"ion-input",[["name","theshold"],["required",""],["type","number"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(n,l,e){var u=!0,o=n.component;return"ionBlur"===l&&(u=!1!==t.zb(n,113)._handleBlurEvent()&&u),"ionChange"===l&&(u=!1!==t.zb(n,113)._handleIonChange(e.target.value)&&u),"ngModelChange"===l&&(u=!1!==(o.newAlert.threshold=e)&&u),u},d.kb,d.t)),t.ob(111,16384,null,0,h.l,[],{required:[0,"required"]},null),t.Db(1024,null,h.e,function(n){return[n]},[h.l]),t.ob(113,16384,null,0,o.Kb,[t.k],null,null),t.Db(1024,null,h.f,function(n){return[n]},[o.Kb]),t.ob(115,671744,[["theshold",4]],0,h.k,[[2,h.a],[6,h.e],[8,null],[6,h.f]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t.Db(2048,null,h.g,null,[h.k]),t.ob(117,16384,null,0,h.h,[[4,h.g]],null,null),t.ob(118,49152,null,0,o.H,[t.h,t.k],{name:[0,"name"],required:[1,"required"],type:[2,"type"]},null),(n()(),t.pb(119,0,null,0,19,"ion-item",[["padding-left",""]],null,null,null,d.lb,d.u)),t.ob(120,49152,null,0,o.I,[t.h,t.k],null,null),(n()(),t.pb(121,0,null,0,2,"ion-label",[["class","deviceview-heading-text"],["position","floating"]],null,null,null,d.mb,d.v)),t.ob(122,49152,null,0,o.O,[t.h,t.k],{position:[0,"position"]},null),(n()(),t.Gb(-1,0,["Only send once per"])),(n()(),t.pb(124,0,null,0,14,"ion-select",[["interface","action-sheet"],["mode","ios"],["name","ngFrequency"],["required",""]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(n,l,e){var u=!0,o=n.component;return"ionBlur"===l&&(u=!1!==t.zb(n,127)._handleBlurEvent()&&u),"ionChange"===l&&(u=!1!==t.zb(n,127)._handleChangeEvent(e.target.value)&&u),"ngModelChange"===l&&(u=!1!==(o.newAlert.frequency=e)&&u),u},d.xb,d.F)),t.ob(125,16384,null,0,h.l,[],{required:[0,"required"]},null),t.Db(1024,null,h.e,function(n){return[n]},[h.l]),t.ob(127,16384,null,0,o.Ob,[t.k],null,null),t.Db(1024,null,h.f,function(n){return[n]},[o.Ob]),t.ob(129,671744,[["ngFrequency",4]],0,h.k,[[2,h.a],[6,h.e],[8,null],[6,h.f]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t.Db(2048,null,h.g,null,[h.k]),t.ob(131,16384,null,0,h.h,[[4,h.g]],null,null),t.ob(132,49152,null,0,o.nb,[t.h,t.k],{mode:[0,"mode"],name:[1,"name"],interface:[2,"interface"]},null),(n()(),t.pb(133,0,null,0,2,"ion-select-option",[["value","day"]],null,null,null,d.wb,d.G)),t.ob(134,49152,null,0,o.ob,[t.h,t.k],{value:[0,"value"]},null),(n()(),t.Gb(-1,0,["day"])),(n()(),t.pb(136,0,null,0,2,"ion-select-option",[["value","week"]],null,null,null,d.wb,d.G)),t.ob(137,49152,null,0,o.ob,[t.h,t.k],{value:[0,"value"]},null),(n()(),t.Gb(-1,0,["week"])),(n()(),t.pb(139,0,null,0,2,"ion-button",[["expand","block"],["margin-top","50px"],["type","submit"]],null,null,null,d.U,d.d)),t.ob(140,49152,null,0,o.l,[t.h,t.k],{disabled:[0,"disabled"],expand:[1,"expand"],type:[2,"type"]},null),(n()(),t.Gb(-1,0,[" Add "])),(n()(),t.pb(142,0,null,0,2,"ion-button",[["expand","block"],["fill","outline"],["margin-top","50px"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.goBack()&&t),t},d.U,d.d)),t.ob(143,49152,null,0,o.l,[t.h,t.k],{expand:[0,"expand"],fill:[1,"fill"]},null),(n()(),t.Gb(-1,0,[" Done "])),(n()(),t.pb(145,0,null,0,0,"p",[["style","padding-top: 20px;"]],null,null,null,null,null)),(n()(),t.pb(146,0,null,0,0,"p",[["style","padding-top: 20px;"]],null,null,null,null,null)),(n()(),t.gb(16777216,null,0,1,null,k)),t.ob(148,16384,null,0,g.l,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(n()(),t.gb(16777216,null,0,1,null,A)),t.ob(150,278528,null,0,g.k,[t.O,t.L,t.s],{ngForOf:[0,"ngForOf"]},null)],function(n,l){var e=l.component;n(l,22,0,"4"),n(l,30,0,"12"),n(l,32,0,"none"),n(l,47,0,"autoAlerts",e.autoAlerts),n(l,50,0,"autoAlerts",""),n(l,60,0,"12"),n(l,62,0,"none"),n(l,72,0,"floating"),n(l,75,0,""),n(l,79,0,"ngAlertMeasurement",e.newAlert.property),n(l,82,0,"ios","ngAlertMeasurement","action-sheet"),n(l,84,0,e.alertProperties),n(l,88,0,"floating"),n(l,91,0,""),n(l,95,0,"ngOperator",e.newAlert.operator),n(l,98,0,"ios","ngOperator","action-sheet"),n(l,100,0,"greater than"),n(l,103,0,"less than"),n(l,108,0,"floating"),n(l,111,0,""),n(l,115,0,"theshold",e.newAlert.threshold),n(l,118,0,"theshold","","number"),n(l,122,0,"floating"),n(l,125,0,""),n(l,129,0,"ngFrequency",e.newAlert.frequency),n(l,132,0,"ios","ngFrequency","action-sheet"),n(l,134,0,"day"),n(l,137,0,"week"),n(l,140,0,!t.zb(l,53).form.valid,"block","submit"),n(l,143,0,"block","outline"),n(l,148,0,(null==e.alertArray?null:e.alertArray.length)>0),n(l,150,0,null==e.monkeyDevice?null:e.monkeyDevice.deviceSettings.customAlerts)},function(n,l){n(l,44,0,t.zb(l,49).ngClassUntouched,t.zb(l,49).ngClassTouched,t.zb(l,49).ngClassPristine,t.zb(l,49).ngClassDirty,t.zb(l,49).ngClassValid,t.zb(l,49).ngClassInvalid,t.zb(l,49).ngClassPending),n(l,51,0,t.zb(l,55).ngClassUntouched,t.zb(l,55).ngClassTouched,t.zb(l,55).ngClassPristine,t.zb(l,55).ngClassDirty,t.zb(l,55).ngClassValid,t.zb(l,55).ngClassInvalid,t.zb(l,55).ngClassPending),n(l,74,0,t.zb(l,75).required?"":null,t.zb(l,81).ngClassUntouched,t.zb(l,81).ngClassTouched,t.zb(l,81).ngClassPristine,t.zb(l,81).ngClassDirty,t.zb(l,81).ngClassValid,t.zb(l,81).ngClassInvalid,t.zb(l,81).ngClassPending),n(l,90,0,t.zb(l,91).required?"":null,t.zb(l,97).ngClassUntouched,t.zb(l,97).ngClassTouched,t.zb(l,97).ngClassPristine,t.zb(l,97).ngClassDirty,t.zb(l,97).ngClassValid,t.zb(l,97).ngClassInvalid,t.zb(l,97).ngClassPending),n(l,110,0,t.zb(l,111).required?"":null,t.zb(l,117).ngClassUntouched,t.zb(l,117).ngClassTouched,t.zb(l,117).ngClassPristine,t.zb(l,117).ngClassDirty,t.zb(l,117).ngClassValid,t.zb(l,117).ngClassInvalid,t.zb(l,117).ngClassPending),n(l,124,0,t.zb(l,125).required?"":null,t.zb(l,131).ngClassUntouched,t.zb(l,131).ngClassTouched,t.zb(l,131).ngClassPristine,t.zb(l,131).ngClassDirty,t.zb(l,131).ngClassValid,t.zb(l,131).ngClassInvalid,t.zb(l,131).ngClassPending)})}function w(n){return t.Ib(0,[(n()(),t.pb(0,0,null,null,1,"app-alerts",[],null,null,null,z,f)),t.ob(1,114688,null,0,a,[p.b,r.a,o.Lb,o.Gb,o.b,m.m,m.a,i.a,t.z,s.a],null,null)],function(n,l){n(l,1,0)},null)}var D=t.lb("app-alerts",a,w,{},{},[]);e.d(l,"AlertsPageModuleNgFactory",function(){return I});var I=t.mb(c,[],function(n){return t.wb([t.xb(512,t.j,t.bb,[[8,[b.a,D]],[3,t.j],t.x]),t.xb(4608,g.n,g.m,[t.u,[2,g.x]]),t.xb(4608,h.o,h.o,[]),t.xb(4608,o.c,o.c,[t.z,t.g]),t.xb(4608,o.Ib,o.Ib,[o.c,t.j,t.q,g.d]),t.xb(4608,o.Mb,o.Mb,[o.c,t.j,t.q,g.d]),t.xb(1073742336,g.c,g.c,[]),t.xb(1073742336,h.m,h.m,[]),t.xb(1073742336,h.b,h.b,[]),t.xb(1073742336,o.Eb,o.Eb,[]),t.xb(1073742336,m.o,m.o,[[2,m.v],[2,m.m]]),t.xb(1073742336,c,c,[]),t.xb(1024,m.k,function(){return[[{path:"",component:a}]]},[])])})},mcMp:function(n,l,e){"use strict";e.d(l,"a",function(){return a});var t=e("mrSG"),u=e("ccyI"),o=e("sE5F"),i=e("67Y/"),r=e("CcnG"),s="https://g9spnwib9k.execute-api.ap-southeast-2.amazonaws.com/v1/",a=function(){function n(n,l){this.http=n,this.authService=l}return n.prototype.removeIllegalChars=function(n){var l=JSON.stringify(n);return console.log("tempStr = "+l),l=l.replace(/[']/g,""),JSON.parse(l)},n.prototype.putReport=function(n,l,e,t){var u=this;return new Promise(function(r,a){u.authService.getAuthenticatedUser().getSession(function(c,b){if(c)return console.log("Error refreshing user session in get Put Report method.",c),a(c);u.http.put(s+"report/?fromTime="+l+"&toTime="+e+"&proxyEmail="+t,n,{headers:new o.d({Authorization:b.getIdToken().getJwtToken()})}).pipe(Object(i.a)(function(n){return n.json()})).subscribe(function(n){return console.log("data : ",n),r(n)},function(n){return console.log("Error in subscribe block. ",n),a(n)})})})},n.prototype.putReportAnalytics=function(n,l,e,t,u,r){var a=this;return new Promise(function(c,b){a.authService.getAuthenticatedUser().getSession(function(d,g){if(d)return console.log("Error refreshing user session in get Put Report method.",d),b(d);a.http.put(s+"report-analytics/?fromTime="+l+"&toTime="+e+"&proxyEmail="+t+"&rmdFile="+u+"&reportParams="+r,n,{headers:new o.d({Authorization:g.getIdToken().getJwtToken()})}).pipe(Object(i.a)(function(n){return n.json()})).subscribe(function(n){return console.log("data : ",n),c(n)},function(n){return console.log("Error in subscribe block. ",n),b(n)})})})},n.prototype.getDeviceData=function(n,l,e){var t=this;return console.log("Let's grab some data for device : "+n),new Promise(function(u,r){t.authService.getAuthenticatedUser().getSession(function(a,c){if(a)return console.log("Error refreshing user session in get Data method.",a),r(a);t.http.get(s+"data/"+n+"?fromTime="+l+"&toTime="+e,{headers:new o.d({Authorization:c.getIdToken().getJwtToken()})}).pipe(Object(i.a)(function(n){return n.json()})).subscribe(function(l){try{if("all"===n){var e=l.body.filter(function(n){return"C"===n.id.charAt(0)||"W"===n.id.charAt(0)||"S"===n.id.charAt(0)||"F"===n.id.charAt(0)||"P"===n.id.charAt(0)||n.id.charAt(0)<="9"});l.body=e}}catch(a){console.log("GetDeviceError = ",a)}return u(l)},function(n){return console.log("Error in subscribe block. ",n),r(n)})})})},n.prototype.deleteData=function(n){console.log("deleting Device Data : ",n);var l=this;return new Promise(function(e,t){l.authService.getAuthenticatedUser().getSession(function(u,r){if(u)return console.log("Error refreshing user session in delete Data method.",u),t(u);l.http.delete(s+"data/"+n,{headers:new o.d({Authorization:r.getIdToken().getJwtToken()})}).pipe(Object(i.a)(function(n){return n.json()})).subscribe(function(n){return console.log("data : ",n),e(n)},function(n){return console.log("Error in subscribe block. ",n),t(n)})})})},n.prototype.getDeviceList=function(n){var l=this;return new Promise(function(e,t){l.authService.getAuthenticatedUser().getSession(function(u,r){if(u)return console.log("Error refreshing user session",u),t(u);console.log("inside authservice get session."),l.http.get(s+"devices/"+n,{headers:new o.d({Authorization:r.getIdToken().getJwtToken()})}).pipe(Object(i.a)(function(n){return n.json()})).subscribe(function(n){var l=n.body.filter(function(n){return"C"===n.deviceId.charAt(0)||"W"===n.deviceId.charAt(0)||"S"===n.deviceId.charAt(0)||"F"===n.deviceId.charAt(0)||"P"===n.deviceId.charAt(0)||n.deviceId.charAt(0)<="9"});return e(l)},function(n){return console.log("Error in subscribe block. ",n),t(n)})})})},n.prototype.putDevice=function(n){var l=this;return console.log("putting device: ",n),n=this.removeIllegalChars(n),console.log("clean device: ",n),new Promise(function(e,t){l.authService.getAuthenticatedUser().getSession(function(u,r){if(u)return console.log("Error refreshing user session",u),t(u);console.log("inside authservice get session."),l.http.put(s+"devices/"+n.deviceId,n,{headers:new o.d({Authorization:r.getIdToken().getJwtToken()})}).pipe(Object(i.a)(function(n){return n.json()})).subscribe(function(n){return console.log("data : ",n),e(n)},function(n){return console.log("Error in subscribe block. ",n),t(n)})})})},n.prototype.putIntervention=function(n,l){var e=this;console.log("putting intervention: ",l),l=this.removeIllegalChars(l);for(var t=0,u=Object.keys(l);t<u.length;t++){var r=u[t];""===l[r]&&(l[r]=" ");try{if(Array.isArray(l[r]))for(var a=0;a<l[r].length;a++)""===l[r][a]&&l[r].splice(a,1)}catch(c){console.log("Error removing empty array object: ",r,l[r],c)}}return console.log("after replacing empty strings: ",l),new Promise(function(t,u){e.authService.getAuthenticatedUser().getSession(function(r,a){if(r)return console.log("Error refreshing user session",r),u(r);console.log("inside authservice get session."),e.http.put(s+"intervention/"+n,l,{headers:new o.d({Authorization:a.getIdToken().getJwtToken()})}).pipe(Object(i.a)(function(n){return n.json()})).subscribe(function(n){return console.log("data : ",n),t(n)},function(n){return console.log("Error in subscribe block. ",n),u(n)})})})},n.prototype.deleteIntervention=function(n,l){console.log("deleting Intervention from - ",n);var e=this;return new Promise(function(t,u){e.authService.getAuthenticatedUser().getSession(function(r,a){if(r)return console.log("Error refreshing user session in delete intervention method.",r),u(r);e.http.delete(s+"intervention/"+n+"?ts="+l.ts,{headers:new o.d({Authorization:a.getIdToken().getJwtToken()})}).pipe(Object(i.a)(function(n){return n.json()})).subscribe(function(n){return console.log("data : ",n),t(n)},function(n){return console.log("Error in subscribe block. ",n),u(n)})})})},n.prototype.getInterventions=function(n){var l=this;return new Promise(function(e,t){l.authService.getAuthenticatedUser().getSession(function(u,r){if(u)return console.log("Error refreshing user session",u),t(u);console.log("inside authservice get session."),l.http.get(s+"intervention/"+n,{headers:new o.d({Authorization:r.getIdToken().getJwtToken()})}).pipe(Object(i.a)(function(n){return n.json()})).subscribe(function(n){return console.log("data in api service : ",n),e(n)},function(n){return console.log("Error in subscribe block. ",n),t(n)})})})},n.prototype.putUserSupport=function(n){return t.a(this,void 0,void 0,function(){var l=this;return t.c(this,function(e){switch(e.label){case 0:return[4,this.authService.getAttribute("preferred_username")];case 1:return e.sent(),[2,new Promise(function(e,t){l.authService.getAuthenticatedUser().getSession(function(u,r){if(u)return console.log("Error refreshing user session",u),t(u);var a="?searchVal="+n;console.log("inside authservice get session."),l.http.put(s+"user-support/"+a,{supportDescription:n},{headers:new o.d({Authorization:r.getIdToken().getJwtToken()})}).pipe(Object(i.a)(function(n){return n.json()})).subscribe(function(n){return console.log("data : ",n),e(n)},function(n){return console.log("Error in subscribe block. ",n),t(n)})})})]}})})},n.ngInjectableDef=r.S({factory:function(){return new n(r.W(o.e),r.W(u.a))},token:n,providedIn:"root"}),n}()}}]);